<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/java.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: Java API bindings</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="java-api-bindings">
<h1>Java API bindings</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#presentation" id="id1">Presentation</a></p></li>
<li><p><a class="reference internal" href="#getting-it" id="id2">Getting it</a></p></li>
<li><p><a class="reference internal" href="#git-source-repository" id="id3">GIT source repository</a></p></li>
<li><p><a class="reference internal" href="#building" id="id4">Building</a></p></li>
<li><p><a class="reference internal" href="#content" id="id5">Content</a></p></li>
<li><p><a class="reference internal" href="#maven" id="id6">Maven</a></p></li>
</ul>
</div>
<div class="section" id="presentation">
<h1><a class="toc-backref" href="#id1">Presentation</a><a class="headerlink" href="#presentation" title="Link to this headline">¶</a></h1>
<p>The Java bindings make use of <a class="reference external" href="https://jna.dev.java.net/">JNA</a> to expose the
C API in a Java friendly way. The bindings are based on work initiated by Toth
Istvan.</p>
</div>
<div class="section" id="getting-it">
<h1><a class="toc-backref" href="#id2">Getting it</a><a class="headerlink" href="#getting-it" title="Link to this headline">¶</a></h1>
<p>The latest versions of the libvirt Java bindings can be downloaded from:</p>
<ul class="simple">
<li><p><a class="reference external" href="ftp://libvirt.org/libvirt/java/">libvirt.org FTP server</a></p></li>
<li><p><a class="reference external" href="https://libvirt.org/sources/java/">libvirt.org HTTP server</a></p></li>
</ul>
<p>A maven repository is located at <a class="reference external" href="https://libvirt.org/maven2/">https://libvirt.org/maven2/</a> which you can use
to include this in your maven projects.</p>
</div>
<div class="section" id="git-source-repository">
<h1><a class="toc-backref" href="#id3">GIT source repository</a><a class="headerlink" href="#git-source-repository" title="Link to this headline">¶</a></h1>
<p>The Java bindings code source is now maintained in a
<a class="reference external" href="https://git-scm.com/">git</a> repository available on
<a class="reference external" href="https://gitlab.com/libvirt/libvirt-java/">gitlab.com</a>:</p>
<pre class="literal-block">git clone https://gitlab.com/libvirt/libvirt-java.git</pre>
</div>
<div class="section" id="building">
<h1><a class="toc-backref" href="#id4">Building</a><a class="headerlink" href="#building" title="Link to this headline">¶</a></h1>
<p>The code is built using ant, and assumes that you have the jna jar installed.
Once you have downloaded the code you can build the code with</p>
<pre class="literal-block">% cd libvirt-java
% ant build</pre>
</div>
<div class="section" id="content">
<h1><a class="toc-backref" href="#id5">Content</a><a class="headerlink" href="#content" title="Link to this headline">¶</a></h1>
<p>The bindings are articulated around a few classes in the <span class="docutils literal">org/libvirt</span>
package, notably the <span class="docutils literal">Connect</span>, <span class="docutils literal">Domain</span> and <span class="docutils literal">Network</span> ones. Functions in
the <a class="reference external" href="html/index.html">C API</a> taking <span class="docutils literal">virConnectPtr</span>, <span class="docutils literal">virDomainPtr</span> or
<span class="docutils literal">virNetworkPtr</span> as their first argument usually become methods for the
classes, their name is just stripped from the virConnect or virDomain(Get)
prefix and the first letter gets converted to lower case, for example the C
functions:</p>
<p><span class="docutils literal">int virConnectNumOfDomains (virConnectPtr conn);</span></p>
<p><span class="docutils literal">int virDomainSetMaxMemory (virDomainPtr domain, unsigned long memory);</span></p>
<p>become</p>
<p><span class="docutils literal">virConn.numOfDomains()</span></p>
<p><span class="docutils literal">virDomain.setMaxMemory(long memory)</span></p>
<p>There is of course some functions where the mapping is less direct and using
extra classes to map complex arguments. The
<a class="reference external" href="https://libvirt.org/sources/java/javadoc">Javadoc</a> is available online or as
part of a separate libvirt-java-javadoc package.</p>
<p>So let's look at a simple example inspired from the <span class="docutils literal">test.java</span> test found in
<span class="docutils literal">src</span> in the source tree:</p>
<pre class="literal-block">import org.libvirt.*;
public class minitest {
    public static void main(String[] args) {
        Connect conn=null;
        try{
            conn = new Connect("test:///default", true);
        } catch (LibvirtException e) {
            System.out.println("exception caught:"+e);
            System.out.println(e.getError());
        }
        try{
            Domain testDomain=conn.domainLookupByName("test");
            System.out.println("Domain:" + testDomain.getName() + " id " +
                               testDomain.getID() + " running " +
                               testDomain.getOSType());
        } catch (LibvirtException e) {
            System.out.println("exception caught:"+e);
            System.out.println(e.getError());
        }
    }
}</pre>
<p>There is not much to comment about it, it really is a straight mapping from the
C API, the only points to notice are:</p>
<ul class="simple">
<li><p>the import of the modules in the <span class="docutils literal">org.libvirt</span> package</p></li>
<li><p>getting a connection to the hypervisor, in that case using the readonly
access to the default test hypervisor.</p></li>
<li><p>getting an object representing the test domain using <span class="docutils literal">lookupByName</span></p></li>
<li><p>if the domain is not found a LibvirtError exception will be raised</p></li>
<li><p>extracting and printing some information about the domain using various
methods associated to the Domain class.</p></li>
</ul>
</div>
<div class="section" id="maven">
<h1><a class="toc-backref" href="#id6">Maven</a><a class="headerlink" href="#maven" title="Link to this headline">¶</a></h1>
<p>Up until version 0.4.7 the Java bindings were available from the central maven
repository.</p>
<p>If you want to use 0.4.8 or higher, please add the following repository to your
pom.xml</p>
<pre class="literal-block">&lt;repositories&gt;
  &lt;repository&gt;
    &lt;id&gt;libvirt-org&lt;/id&gt;
    &lt;url&gt;https://libvirt.org/maven2&lt;/url&gt;
  &lt;/repository&gt;
&lt;/repositories&gt;</pre>
</div>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="downloads.html">Download</a>
          </li>
          <li>
            <a href="contribute.html">Contribute</a>
          </li>
          <li>
            <a href="docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/java.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
