.\" Man page generated from reStructuredText.
.
.TH LIBVIRT-GUESTS 8 "" "" "Virtualization Support"
.SH NAME
libvirt-guests \- suspend/resume running libvirt guests
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBlibvirt\-guests\fP \fICOMMAND\fP
.SH DESCRIPTION
.sp
\fBlibvirt\-guests\fP is a service that can be used to coordinate guest and host
lifecycle actions. By default, \fBlibvirt\-guests\fP will suspend running guests
when the host shuts down, and restore them to their pre\-shutdown state when
the host reboots.
.sp
\fBlibvirt\-guests\fP is typically under control of systemd. When
\fBlibvirt\-guests.service\fP is enabled, systemd will call \fBlibvirt\-guests\fP
with the \fBstart\fP \fICOMMAND\fP when the host boots. Conversely, systemd will call
\fBlibvirt\-guests\fP with the \fBstop\fP \fICOMMAND\fP when the host shuts down.
.sp
\fBlibvirt\-guests\fP can be used directly. In addition to the \fBstart\fP and
\fBstop\fP \fICOMMAND\fPs, it also supports \fBstatus\fP, \fBrestart\fP, \fBcondrestart\fP,
\fBtry\-restart\fP, \fBreload\fP, \fBforce\-reload\fP, \fBgueststatus\fP, and
\fBshutdown\fP \fICOMMAND\fPs.
.SH FILES
.sp
\fBlibvirt\-guests\fP defines several variables to control service behavior.
The default value of these variables can be overridden in:
.INDENT 0.0
.IP \(bu 2
\fB/etc/sysconfig/libvirt\-guests\fP
.UNINDENT
.sp
The following variables are supported:
.INDENT 0.0
.IP \(bu 2
URIS=default
.sp
URIs to check for running guests. Example:
\fBURIS=\(aqdefault xen:///system xen+tcp://host/system lxc:///system\(aq\fP
.IP \(bu 2
ON_BOOT=start
.sp
Action taken on host boot
.INDENT 2.0
.IP \(bu 2
start
.sp
All guests which were running on shutdown are started on boot regardless
of their autostart settings
.IP \(bu 2
ignore
.sp
\fBlibvirt\-guests\fP won\(aqt start any guest on boot, however, guests marked
as autostart will still be automatically started by libvirtd
.UNINDENT
.IP \(bu 2
START_DELAY=0
.sp
Number of seconds to wait between each guest start. Set to 0 to allow parallel
startup.
.IP \(bu 2
ON_SHUTDOWN=suspend
.sp
Action taken on host shutdown
.INDENT 2.0
.IP \(bu 2
suspend
.sp
All running guests are suspended using virsh managedsave
.IP \(bu 2
shutdown
.sp
All running guests are asked to shutdown. Please be careful with this
settings since there is no way to distinguish between a guest which is
stuck or ignores shutdown requests and a guest which just needs a long
time to shutdown. When setting ON_SHUTDOWN=shutdown, you must also set
SHUTDOWN_TIMEOUT to a value suitable for your guests.
.UNINDENT
.IP \(bu 2
PARALLEL_SHUTDOWN=0
.sp
Number of guests will be shutdown concurrently, taking effect when
"ON_SHUTDOWN" is set to "shutdown". If Set to 0, guests will be shutdown one
after another. Number of guests on shutdown at any time will not exceed number
set in this variable.
.IP \(bu 2
SHUTDOWN_TIMEOUT=300
.sp
Number of seconds we\(aqre willing to wait for a guest to shut down. If parallel
shutdown is enabled, this timeout applies as a timeout for shutting down all
guests on a single URI defined in the variable URIS. If this is 0, then there
is no time out (use with caution, as guests might not respond to a shutdown
request). The default value is 300 seconds (5 minutes).
.IP \(bu 2
BYPASS_CACHE=0
.sp
If non\-zero, try to bypass the file system cache when saving and
restoring guests, even though this may give slower operation for
some file systems.
.IP \(bu 2
SYNC_TIME=0
.sp
If non\-zero, try to sync guest time on domain resume. Be aware, that
this requires guest agent with support for time synchronization
running in the guest. By default, this functionality is turned off.
.UNINDENT
.SH BUGS
.sp
Please report all bugs you discover.  This should be done via either:
.INDENT 0.0
.IP 1. 3
the mailing list
.sp
\fI\%https://libvirt.org/contact.html\fP
.IP 2. 3
the bug tracker
.sp
\fI\%https://libvirt.org/bugs.html\fP
.UNINDENT
.sp
Alternatively, you may report bugs to your software distributor / vendor.
.SH AUTHORS
.sp
Please refer to the AUTHORS file distributed with libvirt.
.SH LICENSE
.sp
\fBlibvirt\-guests\fP is distributed under the terms of the GNU LGPL v2.1+.
This is free software; see the source for copying conditions. There
is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE
.SH SEE ALSO
.sp
libvirtd(8), \fI\%https://libvirt.org/\fP
.\" Generated by docutils manpage writer.
.
