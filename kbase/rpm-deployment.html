<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/kbase/rpm-deployment.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="../css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: RPM Deployment Guidance</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="../js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="rpm-deployment-guidance">
<h1>RPM Deployment Guidance</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#rpm-packages" id="id1">RPM packages</a></p></li>
<li><p><a class="reference internal" href="#deployment-choices" id="id2">Deployment choices</a></p>
<ul>
<li><p><a class="reference internal" href="#client-only-install" id="id3">Client only install</a></p></li>
<li><p><a class="reference internal" href="#every-possible-virt-driver" id="id4">Every possible virt driver</a></p></li>
<li><p><a class="reference internal" href="#full-features-for-one-virt-driver" id="id5">Full features for one virt driver</a></p></li>
<li><p><a class="reference internal" href="#minimal-features-for-one-virt-driver" id="id6">Minimal features for one virt driver</a></p></li>
</ul>
</li>
</ul>
</div>
<p>A complete libvirt build includes a wide range of features, many of which are
dynamically loadable at runtime. Applications using libvirt typically only
need to use a subset of these features, and so do not require a full install
of all libvirt RPM packages.</p>
<p>This document provides some guidance on the RPM packages available with libvirt
on Fedora and related distributions, to enable applications and administrators
to pick the optimal set for their needs.</p>
<p>The RHEL and CentOS distributions use the same RPM packaging split, but many
of the drivers will be disabled at build time, so not all of the packages
listed on this page will exist.</p>
<div class="section" id="rpm-packages">
<h1><a class="toc-backref" href="#id1">RPM packages</a><a class="headerlink" href="#rpm-packages" title="Link to this headline">Â¶</a></h1>
<ul>
<li><p>libvirt</p>
<p>This is an empty package that exists solely as a convenient way to install
every other libvirt RPM package. Almost every deployment scenario would be
better served by picking one of the other RPMs listed below.</p>
</li>
<li><p>libvirt-client</p>
<p>The virsh tool, used for interacting with any libvirt driver, both primary
virt drivers and secondary drivers for storage, networking, etc. All libvirt
installs should have this installed as it provides a useful way to view and
debug what is being done by other applications using libvirt.</p>
</li>
<li><p>libvirt-daemon</p>
<p>The monolithic libvirtd daemon, traditionally used for running all the
stateful drivers. This package does not contain any drivers, so further
packages need to be installed to provide the desired drivers.</p>
<p>In addition to the libvirtd daemon this package also contains the virtlogd,
virtlockd and virtproxyd daemons, plus a number of helpers, configuration
files and other bits necessary to create and admin a virtualization host.</p>
<p>The virt-admin tool, also included in this package, is used for
administrative operations on any libvirt daemons. Most usefully it allows
for logging filters and outputs to be reconfigured on a running daemon
without a restart.</p>
</li>
<li><p>libvirt-daemon-config-network</p>
<p>The sample configuration file providing the 'default' virtual network that
enables outbound NAT based connectivity for virtual machines. This is useful
on desktop installations, but is not typically desired on server
installations where VMs will use full bridged connectivity.</p>
</li>
<li><p>libvirt-daemon-config-nwfilter</p>
<p>The sample configuration files providing the network filters for protecting
against common malicious guest traffic. This includes protection against ARP,
MAC and IP spoofing. This is typically desired on server installations, if
the mgmt app is using libvirt's network filtering features.</p>
</li>
<li><p>libvirt-daemon-driver-interface</p>
<p>The dynamically loadable driver providing an implementation of the host
network interface management APIs, as well as the virtinterfaced daemon
binary.</p>
</li>
<li><p>libvirt-daemon-driver-libxl</p>
<p>The dynamically loadable driver providing an implementation of the hypervisor
APIs for Xen using the libxl library, as well as the virtxend daemon
binary.</p>
<p>Note that this is a minimal package so does not actually pull in the full
Xen hypervisor package set. This be must requested separately.</p>
</li>
<li><p>libvirt-daemon-driver-lxc</p>
<p>The dynamically loadable driver providing an implementation of the hypervisor
APIs for Linux containers, as well as the virtlxcd daemon binary.</p>
</li>
<li><p>libvirt-daemon-driver-network</p>
<p>The dynamically loadable driver providing an implementation of the virtual
network interface management APIs, as well as the virtinterfaced daemon
binary. Typically the libvirt-daemon-config-network RPM will also be desired
when this is installed.</p>
</li>
<li><p>libvirt-daemon-driver-nodedev</p>
<p>The dynamically loadable driver providing an implementation of the host
device management APIs, as well as the virtnodedevd daemon binary.</p>
</li>
<li><p>libvirt-daemon-driver-nwfilter</p>
<p>The dynamically loadable driver providing an implementation of the host
network firewall management APIs, as well as the virtnwfilterd daemon
binary.</p>
</li>
<li><p>libvirt-daemon-driver-qemu</p>
<p>The dynamically loadable driver providing an implementation of the hypervisor
network interface management APIs, as well as the virtqemud daemon
binary.</p>
<p>Note that this is a minimal package so does not actually pull in the full
QEMU or KVM package set. This be must requested separately.</p>
</li>
<li><p>libvirt-daemon-driver-secret</p>
<p>The dynamically loadable driver providing an implementation of the secret
data management APIs, as well as the virtsecretd daemon binary.</p>
</li>
<li><p>libvirt-daemon-driver-storage</p>
<p>This is an empty package that exists only as a convenient way to request
installation of all the storage pool drivers.</p>
<p>If the application only supports a subset of storage pool types, then
a smaller install footprint can be obtained by requesting the individual
drivers.</p>
</li>
<li><p>libvirt-daemon-driver-storage-core</p>
<p>The dynamically loadable driver providing an implementation of the host
storage pool/volume management APIs, as well as the virtstoraged daemon
binary.</p>
<p>Note that this is a minimal package so does not actually pull in any pool
implementations.</p>
</li>
<li><p>libvirt-daemon-driver-storage-disk</p>
<p>The dynamically loadable driver providing an implementation of the disk
partition storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-gluster</p>
<p>The dynamically loadable driver providing an implementation of the GlusterFS
file storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-iscsi</p>
<p>The dynamically loadable driver providing an implementation of the ISCSI
disk storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-iscsi-direct</p>
<p>The dynamically loadable driver providing an implementation of the ISCSI
network storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-logical</p>
<p>The dynamically loadable driver providing an implementation of the LVM
storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-mpath</p>
<p>The dynamically loadable driver providing an implementation of the multipath
disk storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-rbd</p>
<p>The dynamically loadable driver providing an implementation of the RBD
network storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-scsi</p>
<p>The dynamically loadable driver providing an implementation of the SCSI
disk storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-sheepdog</p>
<p>The dynamically loadable driver providing an implementation of the SheepDog
network storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-storage-zfs</p>
<p>The dynamically loadable driver providing an implementation of the ZFS
file storage pool type, for the storage pool management APIs.</p>
</li>
<li><p>libvirt-daemon-driver-vbox</p>
<p>The dynamically loadable driver providing an implementation of the host
network interface management APIs, as well as the virtinterfaced daemon
binary.</p>
</li>
<li><p>libvirt-daemon-kvm</p>
<p>This is an empty package that exists only as a convenient way to request
installation of all the libvirt features that are relevant to the management
of KVM guests. This includes the QEMU driver, and the secondary drivers for
secrets, storage pools, virtual networks, host interfaces, host devices
and network filtering.</p>
<p>It will also pull in the full set of QEMU features that can be utilized with
native architecture KVM guests.</p>
<p>This is a good default for an installation to use KVM if the specific set of
required features is not known. To have finer grained control over the
features, the subset of libvirt-daemon-driver-XXX packages should be used
instead.</p>
</li>
<li><p>libvirt-daemon-lxc</p>
<p>This is an empty package that exists only as a convenient way to request
installation of all the libvirt features that are relevant to the management
of Linux containers. This includes the LXC driver, and the secondary drivers
for secrets, storage pools, virtual networks, host interfaces, host devices
and network filtering.</p>
<p>This is a good default for an installation to use LXC if the specific set of
required features is not known. To have finer grained control over the
features, the subset of libvirt-daemon-driver-XXX packages should be used
instead.</p>
</li>
<li><p>libvirt-daemon-qemu</p>
<p>This is an empty package that exists only as a convenient way to request
installation of all the libvirt features that are relevant to the management
of QEMU guests. This includes the QEMU driver, and the secondary drivers for
secrets, storage pools, virtual networks, host interfaces, host devices
and network filtering.</p>
<p>It will also pull in the full set of QEMU features that can be utilized to
emulate any guests architecture supported by QEMU.</p>
<p>This is a good default for an installation to use QEMU if the specific set of
required features is not known. To have finer grained control over the
features, the subset of libvirt-daemon-driver-XXX packages should be used
instead.</p>
</li>
<li><p>libvirt-daemon-vbox</p>
<p>This is an empty package that exists only as a convenient way to request
installation of all the libvirt features that are relevant to the management
of KVM guests. This includes the QEMU driver, and the secondary drivers for
secrets, storage pools, virtual networks, host interfaces, host devices
and network filtering.</p>
<p>This is a good default for an installation to use VirtualBox if the specific
set of required features is not known. To have finer grained control over the
features, the subset of libvirt-daemon-driver-XXX packages should be used
instead.</p>
</li>
<li><p>libvirt-daemon-xen</p>
<p>This is an empty package that exists only as a convenient way to request
installation of all the libvirt features that are relevant to the management
of KVM guests. This includes the QEMU driver, and the secondary drivers for
secrets, storage pools, virtual networks, host interfaces, host devices
and network filtering.</p>
<p>It will also pull in the full set of Xen features that can be utilized with
Xen guests.</p>
<p>This is a good default for an installation to use Xen if the specific set of
required features is not known. To have finer grained control over the
features, the subset of libvirt-daemon-driver-XXX packages should be used
instead.</p>
</li>
<li><p>libvirt-devel</p>
<p>The header files required to build applications, or language bindings against
the libvirt C library. This should never be required on a production host,
only development hosts.</p>
</li>
<li><p>libvirt-docs</p>
<p>A local copy of the <a class="reference external" href="https://libvirt.org">libvirt website</a> website content
that matches the deployed version of libvirt.</p>
</li>
<li><p>libvirt-libs</p>
<p>The ELF libraries providing the main application interface to libvirt. These
have stateless drivers (VMWare ESX, HyperV, etc) built-in, and are able to
take to the libvirt daemons to utilize stateful drivers (QEMU, Xen, BHyve,
LXC, VZ, etc). This is needed on all libvirt hosts, both client and server.</p>
</li>
<li><p>libvirt-lock-sanlock</p>
<p>A plugin for locking disks that communicates with the sanlock daemon. It is
optional and only relevant to hosts with the QEMU driver and oVirt management
application.</p>
</li>
<li><p>libvirt-login-shell</p>
<p>A simple login shell that automatically spawns an LXC container for the user
logging in and places them in a shell inside that container.</p>
</li>
<li><p>libvirt-nss</p>
<p>A NSS plugin that provides hostname resolution for guests attached to a
libvirt virtual network. It is recommended to be installed on any host with
guests using the libvirt virtual network connectivity.</p>
</li>
<li><p>libvirt-wireshark</p>
<p>A wireshark plugin that allows for dissecting the XDR based RPC protocol used
between libvirt and its daemons. Since production deployments should all be
using a TLS encrypted, this only useful for development hosts with a libvirt
daemon configured without encryption.</p>
</li>
</ul>
</div>
<div class="section" id="deployment-choices">
<h1><a class="toc-backref" href="#id2">Deployment choices</a><a class="headerlink" href="#deployment-choices" title="Link to this headline">Â¶</a></h1>
<div class="section" id="client-only-install">
<h2><a class="toc-backref" href="#id3">Client only install</a><a class="headerlink" href="#client-only-install" title="Link to this headline">Â¶</a></h2>
<p>If an application is capable of using multiple different virtualization drivers
it is undesirable to force the installation of a specific set of drivers. In
this case the application will merely wish to request a client only install</p>
<p>Alternatively if an application is intended to communicate with a hypervisor on
a remote host there is no need to install drivers locally, only a client is
needed</p>
<p>The only required package is the <cite>libvirt-libs</cite>, however, it is useful to
also install <cite>libvirt-client</cite>.</p>
</div>
<div class="section" id="every-possible-virt-driver">
<h2><a class="toc-backref" href="#id4">Every possible virt driver</a><a class="headerlink" href="#every-possible-virt-driver" title="Link to this headline">Â¶</a></h2>
<p>There is rarely a need to install every virt driver at once on a given host.
In the unlikely event that this is needed, however, the <cite>libvirt</cite> package
should be installed.</p>
<p>Note that this doesn't actually pull in the hypervisors, only the libvirt
code to talk to the hypervisors.</p>
</div>
<div class="section" id="full-features-for-one-virt-driver">
<h2><a class="toc-backref" href="#id5">Full features for one virt driver</a><a class="headerlink" href="#full-features-for-one-virt-driver" title="Link to this headline">Â¶</a></h2>
<p>This is a common default installation profile when there is no need to minimise
the on-disk footprint.</p>
<p>This is achieved by installing the <cite>libvirt-daemon-XXXX</cite> package for the
virtualization driver that is desired. This will also pull in the default
set of hypervisor packages too.</p>
<p>Since this installs every possible libvirt feature for the virtualization
driver in question, the on-disk footprint is quite large. The in-memory
footprint of the daemons is also relatively large since a lot of code is
loaded.</p>
</div>
<div class="section" id="minimal-features-for-one-virt-driver">
<h2><a class="toc-backref" href="#id6">Minimal features for one virt driver</a><a class="headerlink" href="#minimal-features-for-one-virt-driver" title="Link to this headline">Â¶</a></h2>
<p>This is the best installation profile when it is desired to minimize the
on-disk footprint.</p>
<p>This is achieved by installing the individual <cite>libvirt-daemon-driver-XXX</cite>
packages needed for the features that will be used.  This will not pull in the
hypervisor packages, allowing a fine grained set of hypervisor features to be
chosen separately.</p>
<p>Since this allows fine grained installation of individual libvirt drivers,
this results in the lowest on-disk footprint. The in-memory footprint of
the daemons is also minimized by reducing the code loaded.</p>
<p>As an example, the smallest possible installation for running KVM guests can
be achieved by installing <cite>libvirt-daemon-driver-qemu</cite> and <cite>qemu-kvm-core</cite>.
This will exclude all the secondary libvirt drivers for storage, networking
and host devices, leaving only the bare minimum functionality for managing
KVM guests.</p>
</div>
</div>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="../index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="../downloads.html">Download</a>
          </li>
          <li>
            <a href="../contribute.html">Contribute</a>
          </li>
          <li>
            <a href="../docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="../contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="../contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/kbase/rpm-deployment.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="../governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
