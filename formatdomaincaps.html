<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/formatdomaincaps.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: Domain capabilities XML format</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="domain-capabilities-xml-format">
<h1>Domain capabilities XML format</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#element-and-attribute-overview" id="id2">Element and attribute overview</a></p>
<ul>
<li><p><a class="reference internal" href="#cpu-allocation" id="id3">CPU Allocation</a></p></li>
<li><p><a class="reference internal" href="#bios-bootloader" id="id4">BIOS bootloader</a></p></li>
<li><p><a class="reference internal" href="#cpu-configuration" id="id5">CPU configuration</a></p></li>
<li><p><a class="reference internal" href="#i-o-threads" id="id6">I/O Threads</a></p></li>
<li><p><a class="reference internal" href="#memory-backing" id="id7">Memory Backing</a></p></li>
<li><p><a class="reference internal" href="#devices" id="id8">Devices</a></p>
<ul>
<li><p><a class="reference internal" href="#hard-drives-floppy-disks-cdroms" id="id9">Hard drives, floppy disks, CDROMs</a></p></li>
<li><p><a class="reference internal" href="#graphical-framebuffers" id="id10">Graphical framebuffers</a></p></li>
<li><p><a class="reference internal" href="#video-device" id="id11">Video device</a></p></li>
<li><p><a class="reference internal" href="#host-device-assignment" id="id12">Host device assignment</a></p></li>
<li><p><a class="reference internal" href="#rng-device" id="id13">RNG device</a></p></li>
<li><p><a class="reference internal" href="#filesystem-device" id="id14">Filesystem device</a></p></li>
<li><p><a class="reference internal" href="#tpm-device" id="id15">TPM device</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#features" id="id16">Features</a></p>
<ul>
<li><p><a class="reference internal" href="#gic-capabilities" id="id17">GIC capabilities</a></p></li>
<li><p><a class="reference internal" href="#vmcoreinfo" id="id18">vmcoreinfo</a></p></li>
<li><p><a class="reference internal" href="#genid" id="id19">genid</a></p></li>
<li><p><a class="reference internal" href="#backingstoreinput" id="id20">backingStoreInput</a></p></li>
<li><p><a class="reference internal" href="#backup" id="id21">backup</a></p></li>
<li><p><a class="reference internal" href="#s390-pv-capability" id="id22">s390-pv capability</a></p></li>
<li><p><a class="reference internal" href="#sev-capabilities" id="id23">SEV capabilities</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Link to this headline">¶</a></h1>
<p>Sometimes, when a new domain is to be created it may come handy to know the
capabilities of the hypervisor so the correct combination of devices and drivers
is used. For example, when management application is considering the mode for a
host device's passthrough there are several options depending not only on host,
but on hypervisor in question too. If the hypervisor is qemu then it needs to be
more recent to support VFIO, while legacy KVM is achievable just fine with older
qemus.</p>
<p>The main difference between
<a class="reference external" href="html/libvirt-libvirt-host.html#virConnectGetCapabilities">virConnectGetCapabilities</a>
and the emulator capabilities API is, the former one aims more on the host
capabilities (e.g. NUMA topology, security models in effect, etc.) while the
latter one specializes on the hypervisor capabilities.</p>
<p>While the <a class="reference external" href="formatcaps.html">Driver Capabilities</a> provides the host
capabilities (e.g NUMA topology, security models in effect, etc.), the Domain
Capabilities provides the hypervisor specific capabilities for Management
Applications to query and make decisions regarding what to utilize.</p>
<p>The Domain Capabilities can provide information such as the correct combination
of devices and drivers that are supported. Knowing which host and hypervisor
specific options are available or supported would allow the management
application to choose an appropriate mode for a pass-through host device as well
as which adapter to utilize.</p>
<p>Some XML elements may be entirely omitted from the domaincapabilities XML,
depending on what the libvirt driver has filled in. Applications should only act
on what is explicitly reported in the domaincapabilities XML. For example, if
&lt;disk supported='yes'/&gt; is present, you can safely assume the driver supports
&lt;disk&gt; devices. If &lt;disk supported='no'/&gt; is present, you can safely assume the
driver does NOT support &lt;disk&gt; devices. If the &lt;disk&gt; block is omitted entirely,
the driver is not indicating one way or the other whether it supports &lt;disk&gt;
devices, and applications should not interpret the missing block to mean any
thing in particular.</p>
</div>
<div class="section" id="element-and-attribute-overview">
<h1><a class="toc-backref" href="#id2">Element and attribute overview</a><a class="headerlink" href="#element-and-attribute-overview" title="Link to this headline">¶</a></h1>
<p>A new query interface was added to the virConnect API's to retrieve the XML
listing of the set of domain capabilities ( <span class="since">Since 1.2.7</span> ):</p>
<blockquote>
<p><span class="docutils literal">virConnectGetDomainCapabilities</span> (<a class="reference external" href="html/libvirt-libvirt-domain.html#virConnectGetDomainCapabilities">API docs</a>)</p>
</blockquote>
<p>The root element that emulator capability XML document starts with has name
<span class="docutils literal">domainCapabilities</span>. It contains at least four direct child elements:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  &lt;path&gt;/usr/bin/qemu-system-x86_64&lt;/path&gt;
  &lt;domain&gt;kvm&lt;/domain&gt;
  &lt;machine&gt;pc-i440fx-2.1&lt;/machine&gt;
  &lt;arch&gt;x86_64&lt;/arch&gt;
  ...
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">path</span></dt>
<dd><p>The full path to the emulator binary.</p>
</dd>
<dt><span class="docutils literal">domain</span></dt>
<dd><p>Describes the <a class="reference external" href="formatdomain.html#element-and-attribute-overview">virtualization type</a> (or so
called domain type).</p>
</dd>
<dt><span class="docutils literal">machine</span></dt>
<dd><p>The domain's <a class="reference external" href="formatdomain.html#bios-bootloader">machine type</a>. Since not
every hypervisor has a sense of machine types this element might be omitted
in such drivers.</p>
</dd>
<dt><span class="docutils literal">arch</span></dt>
<dd><p>The domain's <a class="reference external" href="formatdomain.html#bios-bootloader">architecture</a>.</p>
</dd>
</dl>
<div class="section" id="cpu-allocation">
<h2><a class="toc-backref" href="#id3">CPU Allocation</a><a class="headerlink" href="#cpu-allocation" title="Link to this headline">¶</a></h2>
<p>Before any devices capability occurs, there might be info on domain wide
capabilities, e.g. virtual CPUs:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;vcpu max='255'/&gt;
  ...
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">vcpu</span></dt>
<dd><p>The maximum number of supported virtual CPUs</p>
</dd>
</dl>
</div>
<div class="section" id="bios-bootloader">
<h2><a class="toc-backref" href="#id4">BIOS bootloader</a><a class="headerlink" href="#bios-bootloader" title="Link to this headline">¶</a></h2>
<p>Sometimes users might want to tweak some BIOS knobs or use UEFI. For cases like
that, <a class="reference external" href="formatdomain.html#bios-bootloader">os</a> element exposes what values can
be passed to its children.</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;os supported='yes'&gt;
    &lt;enum name='firmware'&gt;
      &lt;value&gt;bios&lt;/value&gt;
      &lt;value&gt;efi&lt;/value&gt;
    &lt;/enum&gt;
    &lt;loader supported='yes'&gt;
      &lt;value&gt;/usr/share/OVMF/OVMF_CODE.fd&lt;/value&gt;
      &lt;enum name='type'&gt;
        &lt;value&gt;rom&lt;/value&gt;
        &lt;value&gt;pflash&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='readonly'&gt;
        &lt;value&gt;yes&lt;/value&gt;
        &lt;value&gt;no&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='secure'&gt;
        &lt;value&gt;yes&lt;/value&gt;
        &lt;value&gt;no&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/loader&gt;
  &lt;/os&gt;
  ...
&lt;domainCapabilities&gt;</pre>
<p>The <span class="docutils literal">firmware</span> enum corresponds to the <span class="docutils literal">firmware</span> attribute of the <span class="docutils literal">os</span>
element in the domain XML. The presence of this enum means libvirt is capable of
the so-called firmware auto-selection feature. And the listed firmware values
represent the accepted input in the domain XML. Note that the <span class="docutils literal">firmware</span> enum
reports only those values for which a firmware "descriptor file" exists on the
host. Firmware descriptor file is a small JSON document that describes details
about a given BIOS or UEFI binary on the host, e.g. the firmware binary path,
its architecture, supported machine types, NVRAM template, etc. This ensures
that the reported values won't cause a failure on guest boot.</p>
<p>For the <span class="docutils literal">loader</span> element, the following can occur:</p>
<dl class="simple">
<dt><span class="docutils literal">value</span></dt>
<dd><p>List of known firmware binary paths. Currently this is used only to advertise
the known location of OVMF binaries for QEMU. OVMF binaries will only be
listed if they actually exist on host.</p>
</dd>
<dt><span class="docutils literal">type</span></dt>
<dd><p>Whether the boot loader is a typical BIOS (<span class="docutils literal">rom</span>) or a UEFI firmware
(<span class="docutils literal">pflash</span>). Each <span class="docutils literal">value</span> sub-element under the <span class="docutils literal">type</span> enum represents a
possible value for the <span class="docutils literal">type</span> attribute for the &lt;loader/&gt; element in the
domain XML. E.g. the presence of <span class="docutils literal">pfalsh</span> under the <span class="docutils literal">type</span> enum means
that a domain XML can use UEFI firmware via: &lt;loader/&gt; type="pflash"
...&gt;/path/to/the/firmware/binary/&lt;/loader&gt;.</p>
</dd>
<dt><span class="docutils literal">readonly</span></dt>
<dd><p>Options for the <span class="docutils literal">readonly</span> attribute of the &lt;loader/&gt; element in the domain
XML.</p>
</dd>
<dt><span class="docutils literal">secure</span></dt>
<dd><p>Options for the <span class="docutils literal">secure</span> attribute of the &lt;loader/&gt; element in the domain
XML. Note that the value <span class="docutils literal">yes</span> is listed only if libvirt detects a firmware
descriptor file that has path to an OVMF binary that supports Secure boot,
and lists its architecture and supported machine type.</p>
</dd>
</dl>
</div>
<div class="section" id="cpu-configuration">
<h2><a class="toc-backref" href="#id5">CPU configuration</a><a class="headerlink" href="#cpu-configuration" title="Link to this headline">¶</a></h2>
<p>The <span class="docutils literal">cpu</span> element exposes options usable for configuring <a class="reference external" href="formatdomain.html#cpu-model-and-topology">guest
CPUs</a>.</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;cpu&gt;
    &lt;mode name='host-passthrough' supported='yes'&gt;
      &lt;enum name='hostPassthroughMigratable'&gt;
        &lt;value&gt;on&lt;/value&gt;
        &lt;value&gt;off&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/mode&gt;
    &lt;mode name='maximum' supported='yes'&gt;
      &lt;enum name='maximumMigratable'&gt;
        &lt;value&gt;on&lt;/value&gt;
        &lt;value&gt;off&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/mode&gt;
    &lt;mode name='host-model' supported='yes'&gt;
      &lt;model fallback='allow'&gt;Broadwell&lt;/model&gt;
      &lt;vendor&gt;Intel&lt;/vendor&gt;
      &lt;feature policy='disable' name='aes'/&gt;
      &lt;feature policy='require' name='vmx'/&gt;
    &lt;/mode&gt;
    &lt;mode name='custom' supported='yes'&gt;
      &lt;model usable='no' deprecated='no'&gt;Broadwell&lt;/model&gt;
      &lt;model usable='yes' deprecated='no'&gt;Broadwell-noTSX&lt;/model&gt;
      &lt;model usable='no' deprecated='yes'&gt;Haswell&lt;/model&gt;
      ...
    &lt;/mode&gt;
  &lt;/cpu&gt;
  ...
&lt;domainCapabilities&gt;</pre>
<p>Each CPU mode understood by libvirt is described with a <span class="docutils literal">mode</span> element which
tells whether the particular mode is supported and provides (when applicable)
more details about it:</p>
<dl class="simple">
<dt><span class="docutils literal"><span class="pre">host-passthrough</span></span></dt>
<dd><p>The <span class="docutils literal">hostPassthroughMigratable</span> enum shows possible values of the
<span class="docutils literal">migratable</span> attribute for the &lt;cpu&gt; element with
<span class="docutils literal"><span class="pre">mode='host-passthrough'</span></span> in the domain XML.</p>
</dd>
<dt><span class="docutils literal"><span class="pre">host-model</span></span></dt>
<dd><p>If <span class="docutils literal"><span class="pre">host-model</span></span> is supported by the hypervisor, the <span class="docutils literal">mode</span> describes the
guest CPU which will be used when starting a domain with <span class="docutils literal"><span class="pre">host-model</span></span> CPU.
The hypervisor specifics (such as unsupported CPU models or features, machine
type, etc.) may be accounted for in this guest CPU specification and thus the
CPU can be different from the one shown in host capabilities XML. This is
indicated by the <span class="docutils literal">fallback</span> attribute of the <span class="docutils literal">model</span> sub element:
<span class="docutils literal">allow</span> means not all specifics were accounted for and thus the CPU a guest
will see may be different; <span class="docutils literal">forbid</span> indicates that the CPU a guest will see
should match this CPU definition.</p>
</dd>
<dt><span class="docutils literal">custom</span></dt>
<dd><p>The <span class="docutils literal">mode</span> element contains a list of supported CPU models, each described
by a dedicated <span class="docutils literal">model</span> element. The <span class="docutils literal">usable</span> attribute specifies whether
the model can be used directly on the host. When usable='no' the
corresponding model cannot be used without disabling some features that the
CPU of such model is expected to have. A special value <span class="docutils literal">unknown</span> indicates
libvirt does not have enough information to provide the usability data. The
<span class="docutils literal">deprecated</span> attribute reflects the hypervisor's policy on usage of this
model <span class="since">(since 7.1.0)</span> .</p>
</dd>
</dl>
</div>
<div class="section" id="i-o-threads">
<h2><a class="toc-backref" href="#id6">I/O Threads</a><a class="headerlink" href="#i-o-threads" title="Link to this headline">¶</a></h2>
<p>The <span class="docutils literal">iothread</span> elements indicates whether or not <a class="reference external" href="formatdomain.html#iothreads-allocation">I/O
threads</a> are supported.</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;iothread supported='yes'/&gt;
  ...
&lt;domainCapabilities&gt;</pre>
</div>
<div class="section" id="memory-backing">
<h2><a class="toc-backref" href="#id7">Memory Backing</a><a class="headerlink" href="#memory-backing" title="Link to this headline">¶</a></h2>
<p>The <span class="docutils literal">memory backing</span> element indicates whether or not <a class="reference external" href="formatdomain.html#memory-backing">memory
backing</a> is supported.</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;memoryBacking supported='yes'&gt;
    &lt;enum name='sourceType'&gt;
      &lt;value&gt;anonymous&lt;/value&gt;
      &lt;value&gt;file&lt;/value&gt;
      &lt;value&gt;memfd&lt;/value&gt;
    &lt;/enum&gt;
  &lt;/memoryBacking&gt;
  ...
&lt;domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">sourceType</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the &lt;memoryBacking&gt;&lt;source&gt; element.</p>
</dd>
</dl>
</div>
<div class="section" id="devices">
<h2><a class="toc-backref" href="#id8">Devices</a><a class="headerlink" href="#devices" title="Link to this headline">¶</a></h2>
<p>Another set of XML elements describe the supported devices and their
capabilities. All devices occur as children of the main <span class="docutils literal">devices</span> element.</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;disk supported='yes'&gt;
      &lt;enum name='diskDevice'&gt;
        &lt;value&gt;disk&lt;/value&gt;
        &lt;value&gt;cdrom&lt;/value&gt;
        &lt;value&gt;floppy&lt;/value&gt;
        &lt;value&gt;lun&lt;/value&gt;
      &lt;/enum&gt;
      ...
    &lt;/disk&gt;
    &lt;hostdev supported='no'/&gt;
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<p>Reported capabilities are expressed as an enumerated list of available options
for each of the element or attribute. For example, the &lt;disk/&gt; element has an
attribute <span class="docutils literal">device</span> which can support the values <span class="docutils literal">disk</span>, <span class="docutils literal">cdrom</span>,
<span class="docutils literal">floppy</span>, or <span class="docutils literal">lun</span>.</p>
<div class="section" id="hard-drives-floppy-disks-cdroms">
<h3><a class="toc-backref" href="#id9">Hard drives, floppy disks, CDROMs</a><a class="headerlink" href="#hard-drives-floppy-disks-cdroms" title="Link to this headline">¶</a></h3>
<p>Disk capabilities are exposed under the <span class="docutils literal">disk</span> element. For instance:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;disk supported='yes'&gt;
      &lt;enum name='diskDevice'&gt;
        &lt;value&gt;disk&lt;/value&gt;
        &lt;value&gt;cdrom&lt;/value&gt;
        &lt;value&gt;floppy&lt;/value&gt;
        &lt;value&gt;lun&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='bus'&gt;
        &lt;value&gt;ide&lt;/value&gt;
        &lt;value&gt;fdc&lt;/value&gt;
        &lt;value&gt;scsi&lt;/value&gt;
        &lt;value&gt;virtio&lt;/value&gt;
        &lt;value&gt;xen&lt;/value&gt;
        &lt;value&gt;usb&lt;/value&gt;
        &lt;value&gt;sata&lt;/value&gt;
        &lt;value&gt;sd&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/disk&gt;
    ...
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">diskDevice</span></dt>
<dd><p>Options for the <span class="docutils literal">device</span> attribute of the &lt;disk/&gt; element.</p>
</dd>
<dt><span class="docutils literal">bus</span></dt>
<dd><p>Options for the <span class="docutils literal">bus</span> attribute of the &lt;target/&gt; element for a &lt;disk/&gt;.</p>
</dd>
</dl>
</div>
<div class="section" id="graphical-framebuffers">
<h3><a class="toc-backref" href="#id10">Graphical framebuffers</a><a class="headerlink" href="#graphical-framebuffers" title="Link to this headline">¶</a></h3>
<p>Graphics device capabilities are exposed under the <span class="docutils literal">graphics</span> element. For
instance:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;graphics supported='yes'&gt;
      &lt;enum name='type'&gt;
        &lt;value&gt;sdl&lt;/value&gt;
        &lt;value&gt;vnc&lt;/value&gt;
        &lt;value&gt;spice&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/graphics&gt;
    ...
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">type</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the &lt;graphics/&gt; element.</p>
</dd>
</dl>
</div>
<div class="section" id="video-device">
<h3><a class="toc-backref" href="#id11">Video device</a><a class="headerlink" href="#video-device" title="Link to this headline">¶</a></h3>
<p>Video device capabilities are exposed under the <span class="docutils literal">video</span> element. For instance:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;video supported='yes'&gt;
      &lt;enum name='modelType'&gt;
        &lt;value&gt;vga&lt;/value&gt;
        &lt;value&gt;cirrus&lt;/value&gt;
        &lt;value&gt;vmvga&lt;/value&gt;
        &lt;value&gt;qxl&lt;/value&gt;
        &lt;value&gt;virtio&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/video&gt;
    ...
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">modelType</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the &lt;video&gt;&lt;model&gt; element.</p>
</dd>
</dl>
</div>
<div class="section" id="host-device-assignment">
<h3><a class="toc-backref" href="#id12">Host device assignment</a><a class="headerlink" href="#host-device-assignment" title="Link to this headline">¶</a></h3>
<p>Some host devices can be passed through to a guest (e.g. USB, PCI and SCSI).
Well, only if the following is enabled:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;hostdev supported='yes'&gt;
      &lt;enum name='mode'&gt;
        &lt;value&gt;subsystem&lt;/value&gt;
        &lt;value&gt;capabilities&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='startupPolicy'&gt;
        &lt;value&gt;default&lt;/value&gt;
        &lt;value&gt;mandatory&lt;/value&gt;
        &lt;value&gt;requisite&lt;/value&gt;
        &lt;value&gt;optional&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='subsysType'&gt;
        &lt;value&gt;usb&lt;/value&gt;
        &lt;value&gt;pci&lt;/value&gt;
        &lt;value&gt;scsi&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='capsType'&gt;
        &lt;value&gt;storage&lt;/value&gt;
        &lt;value&gt;misc&lt;/value&gt;
        &lt;value&gt;net&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='pciBackend'&gt;
        &lt;value&gt;default&lt;/value&gt;
        &lt;value&gt;kvm&lt;/value&gt;
        &lt;value&gt;vfio&lt;/value&gt;
        &lt;value&gt;xen&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/hostdev&gt;
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">mode</span></dt>
<dd><p>Options for the <span class="docutils literal">mode</span> attribute of the &lt;hostdev/&gt; element.</p>
</dd>
<dt><span class="docutils literal">startupPolicy</span></dt>
<dd><p>Options for the <span class="docutils literal">startupPolicy</span> attribute of the &lt;hostdev/&gt; element.</p>
</dd>
<dt><span class="docutils literal">subsysType</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the &lt;hostdev/&gt; element in case of
<span class="docutils literal"><span class="pre">mode="subsystem"</span></span>.</p>
</dd>
<dt><span class="docutils literal">capsType</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the &lt;hostdev/&gt; element in case of
<span class="docutils literal"><span class="pre">mode="capabilities"</span></span>.</p>
</dd>
<dt><span class="docutils literal">pciBackend</span></dt>
<dd><p>Options for the <span class="docutils literal">name</span> attribute of the &lt;driver/&gt; element.</p>
</dd>
</dl>
</div>
<div class="section" id="rng-device">
<h3><a class="toc-backref" href="#id13">RNG device</a><a class="headerlink" href="#rng-device" title="Link to this headline">¶</a></h3>
<p>RNG device capabilities are exposed under the <span class="docutils literal">rng</span> element. For instance:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;rng supported='yes'&gt;
      &lt;enum name='model'&gt;
        &lt;value&gt;virtio&lt;/value&gt;
        &lt;value&gt;virtio-transitional&lt;/value&gt;
        &lt;value&gt;virtio-non-transitional&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='backendModel'&gt;
        &lt;value&gt;random&lt;/value&gt;
        &lt;value&gt;egd&lt;/value&gt;
        &lt;value&gt;builtin&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/rng&gt;
    ...
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">model</span></dt>
<dd><p>Options for the <span class="docutils literal">model</span> attribute of the &lt;rng&gt; element.</p>
</dd>
<dt><span class="docutils literal">backendModel</span></dt>
<dd><p>Options for the <span class="docutils literal">model</span> attribute of the &lt;rng&gt;&lt;backend&gt; element.</p>
</dd>
</dl>
</div>
<div class="section" id="filesystem-device">
<h3><a class="toc-backref" href="#id14">Filesystem device</a><a class="headerlink" href="#filesystem-device" title="Link to this headline">¶</a></h3>
<p>Filesystem device capabilities are exposed under the <span class="docutils literal">filesystem</span> element. For
instance:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;filesystem supported='yes'&gt;
      &lt;enum name='driverType'&gt;
        &lt;value&gt;default&lt;/value&gt;
        &lt;value&gt;path&lt;/value&gt;
        &lt;value&gt;handle&lt;/value&gt;
        &lt;value&gt;virtiofs&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/filesystem&gt;
    ...
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">driverType</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the &lt;filesystem&gt;&lt;driver&gt; element.</p>
</dd>
</dl>
</div>
<div class="section" id="tpm-device">
<h3><a class="toc-backref" href="#id15">TPM device</a><a class="headerlink" href="#tpm-device" title="Link to this headline">¶</a></h3>
<p>TPM device capabilities are exposed under the <span class="docutils literal">tpm</span> element. For instance:</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;devices&gt;
    &lt;tpm supported='yes'&gt;
      &lt;enum name='model'&gt;
        &lt;value&gt;tpm-tis&lt;/value&gt;
        &lt;value&gt;tpm-crb&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='backendModel'&gt;
        &lt;value&gt;passthrough&lt;/value&gt;
        &lt;value&gt;emulator&lt;/value&gt;
      &lt;/enum&gt;
      &lt;enum name='backendVersion'&gt;
        &lt;value&gt;1.2&lt;/value&gt;
        &lt;value&gt;2.0&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/tpm&gt;
    ...
  &lt;/devices&gt;
&lt;/domainCapabilities&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">model</span></dt>
<dd><p>Options for the <span class="docutils literal">model</span> attribute of the <span class="docutils literal">&lt;tpm/&gt;</span> element.</p>
</dd>
<dt><span class="docutils literal">backendModel</span></dt>
<dd><p>Options for the <span class="docutils literal">type</span> attribute of the <span class="docutils literal"><span class="pre">&lt;tpm&gt;&lt;backend/&gt;</span></span> element.</p>
</dd>
<dt><span class="docutils literal">backendVersion</span></dt>
<dd><p>Options for the <span class="docutils literal">version</span> attribute of the <span class="docutils literal"><span class="pre">&lt;tpm&gt;&lt;backend/&gt;</span></span> element.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="features">
<h2><a class="toc-backref" href="#id16">Features</a><a class="headerlink" href="#features" title="Link to this headline">¶</a></h2>
<p>One more set of XML elements describe the supported features and their
capabilities. All features occur as children of the main <span class="docutils literal">features</span> element.</p>
<pre class="literal-block">&lt;domainCapabilities&gt;
  ...
  &lt;features&gt;
    &lt;gic supported='yes'&gt;
      &lt;enum name='version'&gt;
        &lt;value&gt;2&lt;/value&gt;
        &lt;value&gt;3&lt;/value&gt;
      &lt;/enum&gt;
    &lt;/gic&gt;
    &lt;vmcoreinfo supported='yes'/&gt;
    &lt;genid supported='yes'/&gt;
    &lt;backingStoreInput supported='yes'/&gt;
    &lt;backup supported='yes'/&gt;
    &lt;sev&gt;
      &lt;cbitpos&gt;47&lt;/cbitpos&gt;
      &lt;reduced-phys-bits&gt;1&lt;/reduced-phys-bits&gt;
    &lt;/sev&gt;
  &lt;/features&gt;
&lt;/domainCapabilities&gt;</pre>
<p>Reported capabilities are expressed as an enumerated list of possible values for
each of the elements or attributes. For example, the <span class="docutils literal">gic</span> element has an
attribute <span class="docutils literal">version</span> which can support the values <span class="docutils literal">2</span> or <span class="docutils literal">3</span>.</p>
<p>For information about the purpose of each feature, see the <a class="reference external" href="formatdomain.html#hypervisor-features">relevant
section</a> in the domain XML documentation.</p>
<div class="section" id="gic-capabilities">
<h3><a class="toc-backref" href="#id17">GIC capabilities</a><a class="headerlink" href="#gic-capabilities" title="Link to this headline">¶</a></h3>
<p>GIC capabilities are exposed under the <span class="docutils literal">gic</span> element.</p>
<dl class="simple">
<dt><span class="docutils literal">version</span></dt>
<dd><p>Options for the <span class="docutils literal">version</span> attribute of the <span class="docutils literal">gic</span> element.</p>
</dd>
</dl>
</div>
<div class="section" id="vmcoreinfo">
<h3><a class="toc-backref" href="#id18">vmcoreinfo</a><a class="headerlink" href="#vmcoreinfo" title="Link to this headline">¶</a></h3>
<p>Reports whether the vmcoreinfo feature can be enabled.</p>
</div>
<div class="section" id="genid">
<h3><a class="toc-backref" href="#id19">genid</a><a class="headerlink" href="#genid" title="Link to this headline">¶</a></h3>
<p>Reports whether the genid feature can be used by the domain.</p>
</div>
<div class="section" id="backingstoreinput">
<h3><a class="toc-backref" href="#id20">backingStoreInput</a><a class="headerlink" href="#backingstoreinput" title="Link to this headline">¶</a></h3>
<p>Reports whether the hypervisor will obey the &lt;backingStore&gt; elements configured
for a &lt;disk&gt; when booting the guest, hotplugging the disk to a running guest, or
similar. <span class="since">(Since 5.10)</span></p>
</div>
<div class="section" id="backup">
<h3><a class="toc-backref" href="#id21">backup</a><a class="headerlink" href="#backup" title="Link to this headline">¶</a></h3>
<p>Reports whether the hypervisor supports the backup, checkpoint, and related
features. (<span class="docutils literal">virDomainBackupBegin</span>, <span class="docutils literal">virDomainCheckpointCreateXML</span> etc). The
presence of the <span class="docutils literal">backup</span> element even if <span class="docutils literal"><span class="pre">supported='no'</span></span> implies that the
<span class="docutils literal">VIR_DOMAIN_UNDEFINE_CHECKPOINTS_METADATA</span> flag for <span class="docutils literal">virDomainUndefine</span> is
supported.</p>
</div>
<div class="section" id="s390-pv-capability">
<h3><a class="toc-backref" href="#id22">s390-pv capability</a><a class="headerlink" href="#s390-pv-capability" title="Link to this headline">¶</a></h3>
<p>Reports whether the hypervisor supports the Protected Virtualization. In order
to use Protected Virtualization with libvirt have a look at the <a class="reference external" href="formatdomain.html#launch-security">launchSecurity
element in the domain XML</a>. For more
details on the Protected Virtualization feature please see <a class="reference external" href="kbase/s390_protected_virt.html">Protected
Virtualization on s390</a>.</p>
</div>
<div class="section" id="sev-capabilities">
<h3><a class="toc-backref" href="#id23">SEV capabilities</a><a class="headerlink" href="#sev-capabilities" title="Link to this headline">¶</a></h3>
<p>AMD Secure Encrypted Virtualization (SEV) capabilities are exposed under the
<span class="docutils literal">sev</span> element. SEV is an extension to the AMD-V architecture which supports
running virtual machines (VMs) under the control of a hypervisor. When
supported, guest owner can create a VM whose memory contents will be
transparently encrypted with a key unique to that VM.</p>
<p>For more details on the SEV feature, please follow resources in the AMD
developer's document store. In order to use SEV with libvirt have a look at <a class="reference external" href="formatdomain.html#launch-security">SEV
in domain XML</a></p>
<dl class="simple">
<dt><span class="docutils literal">cbitpos</span></dt>
<dd><p>When memory encryption is enabled, one of the physical address bits (aka the
C-bit) is utilized to mark if a memory page is protected. The C-bit position
is Hypervisor dependent.</p>
</dd>
<dt><span class="docutils literal">reducedPhysBits</span></dt>
<dd><p>When memory encryption is enabled, we lose certain bits in physical address
space. The number of bits we lose is hypervisor dependent.</p>
</dd>
<dt><span class="docutils literal">maxGuests</span></dt>
<dd><p>The maximum number of SEV guests that can be launched on the host. This value
may be configurable in the firmware for some hosts.</p>
</dd>
<dt><span class="docutils literal">maxESGuests</span></dt>
<dd><p>The maximum number of SEV-ES guests that can be launched on the host. This
value may be configurable in the firmware for some hosts.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="downloads.html">Download</a>
          </li>
          <li>
            <a href="contribute.html">Contribute</a>
          </li>
          <li>
            <a href="docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/formatdomaincaps.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
