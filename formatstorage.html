<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/formatstorage.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: Storage pool and volume XML format</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="storage-pool-and-volume-xml-format">
<h1>Storage pool and volume XML format</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#storage-pool-xml" id="id1">Storage pool XML</a></p>
<ul>
<li><p><a class="reference internal" href="#storage-pool-general-metadata" id="id2">Storage pool general metadata</a></p></li>
<li><p><a class="reference internal" href="#features" id="id3">Features</a></p></li>
<li><p><a class="reference internal" href="#source-elements" id="id4">Source elements</a></p></li>
<li><p><a class="reference internal" href="#storage-pool-target-elements" id="id5">Storage pool target elements</a></p></li>
<li><p><a class="reference internal" href="#device-extents" id="id6">Device extents</a></p></li>
<li><p><a class="reference internal" href="#refresh-overrides" id="id7">Refresh overrides</a></p></li>
<li><p><a class="reference internal" href="#storage-pool-namespaces" id="id8">Storage Pool Namespaces</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#storage-volume-xml" id="id9">Storage volume XML</a></p>
<ul>
<li><p><a class="reference internal" href="#storage-volume-general-metadata" id="id10">Storage volume general metadata</a></p></li>
<li><p><a class="reference internal" href="#storage-volume-target-elements" id="id11">Storage volume target elements</a></p></li>
<li><p><a class="reference internal" href="#backing-store-elements" id="id12">Backing store elements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#example-configuration" id="id13">Example configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#file-based-storage-pool" id="id14">File based storage pool</a></p></li>
<li><p><a class="reference internal" href="#iscsi-based-storage-pool" id="id15">iSCSI based storage pool</a></p></li>
<li><p><a class="reference internal" href="#storage-volume" id="id16">Storage volume</a></p></li>
<li><p><a class="reference internal" href="#storage-volume-using-luks" id="id17">Storage volume using LUKS</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="storage-pool-xml">
<h1><a class="toc-backref" href="#id1">Storage pool XML</a><a class="headerlink" href="#storage-pool-xml" title="Link to this headline">¶</a></h1>
<p>Although all storage pool backends share the same public APIs and XML format,
they have varying levels of capabilities. Some may allow creation of volumes,
others may only allow use of pre-existing volumes. Some may have constraints on
volume size, or placement.</p>
<p>The top level tag for a storage pool document is 'pool'. It has a single
attribute <span class="docutils literal">type</span>, which is one of <span class="docutils literal">dir</span>, <span class="docutils literal">fs</span>, <span class="docutils literal">netfs</span>, <span class="docutils literal">disk</span>,
<span class="docutils literal">iscsi</span>, <span class="docutils literal">logical</span>, <span class="docutils literal">scsi</span> (all <span class="since">since 0.4.1</span> ), <span class="docutils literal">mpath</span> (
<span class="since">since 0.7.1</span> ), <span class="docutils literal">rbd</span> ( <span class="since">since 0.9.13</span> ), <span class="docutils literal">sheepdog</span> (
<span class="since">since 0.10.0</span> ), <span class="docutils literal">gluster</span> ( <span class="since">since 1.2.0</span> ), <span class="docutils literal">zfs</span> (
<span class="since">since 1.2.8</span> ), <span class="docutils literal">vstorage</span> ( <span class="since">since 3.1.0</span> ), or
<span class="docutils literal"><span class="pre">iscsi-direct</span></span> ( <span class="since">since 4.7.0</span> ). This corresponds to the storage
backend drivers listed further along in this document.</p>
<div class="section" id="storage-pool-general-metadata">
<h2><a class="toc-backref" href="#id2">Storage pool general metadata</a><a class="headerlink" href="#storage-pool-general-metadata" title="Link to this headline">¶</a></h2>
<pre class="literal-block">&lt;pool type="iscsi"&gt;
  &lt;name&gt;virtimages&lt;/name&gt;
  &lt;uuid&gt;3e3fce45-4f53-4fa7-bb32-11f34168b82b&lt;/uuid&gt;
  &lt;allocation&gt;10000000&lt;/allocation&gt;
  &lt;capacity&gt;50000000&lt;/capacity&gt;
  &lt;available&gt;40000000&lt;/available&gt;
  ...</pre>
<dl class="simple">
<dt><span class="docutils literal">name</span></dt>
<dd><p>Providing a name for the pool which is unique to the host. This is mandatory
when defining a pool. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">uuid</span></dt>
<dd><p>Providing an identifier for the pool which is globally unique. This is
optional when defining a pool, a UUID will be generated if omitted.
<span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">allocation</span></dt>
<dd><p>Providing the total storage allocation for the pool. This may be larger than
the sum of the allocation of all volumes due to metadata overhead. This value
is in bytes. This is not applicable when creating a pool. <span class="since">Since
0.4.1</span></p>
</dd>
<dt><span class="docutils literal">capacity</span></dt>
<dd><p>Providing the total storage capacity for the pool. Due to underlying device
constraints it may not be possible to use the full capacity for storage
volumes. This value is in bytes. This is not applicable when creating a pool.
<span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">available</span></dt>
<dd><p>Providing the free space available for allocating new volumes in the pool.
Due to underlying device constraints it may not be possible to allocate the
entire free space to a single volume. This value is in bytes. This is not
applicable when creating a pool. <span class="since">Since 0.4.1</span></p>
</dd>
</dl>
</div>
<div class="section" id="features">
<h2><a class="toc-backref" href="#id3">Features</a><a class="headerlink" href="#features" title="Link to this headline">¶</a></h2>
<p>Some pools support optional features:</p>
<pre class="literal-block">...
&lt;features&gt;
  &lt;cow state='no'&gt;
&lt;/features&gt;
...</pre>
<p>Valid features are:</p>
<dl class="simple">
<dt><span class="docutils literal">cow</span></dt>
<dd><p>Controls whether the filesystem performs copy-on-write (COW) for images in
the pool. This may only be set for directory / filesystem pools on the
<span class="docutils literal">btrfs</span> filesystem. If not set then libvirt will attempt to disable COW
on any btrfs filesystems. <span class="since">Since 6.6.0</span>.</p>
</dd>
</dl>
</div>
<div class="section" id="source-elements">
<h2><a class="toc-backref" href="#id4">Source elements</a><a class="headerlink" href="#source-elements" title="Link to this headline">¶</a></h2>
<p>A single <span class="docutils literal">source</span> element is contained within the top level <span class="docutils literal">pool</span> element.
This tag is used to describe the source of the storage pool. The set of child
elements that it will contain depend on the pool type, but come from the
following child elements:</p>
<pre class="literal-block">...
&lt;source&gt;
  &lt;host name="iscsi.example.com"/&gt;
  &lt;device path="iqn.2013-06.com.example:iscsi-pool"/&gt;
  &lt;auth type='chap' username='myname'&gt;
    &lt;secret usage='mycluster_myname'/&gt;
  &lt;/auth&gt;
  &lt;vendor name="Acme"/&gt;
  &lt;product name="model"/&gt;
&lt;/source&gt;
...</pre>
<pre class="literal-block">...
&lt;source&gt;
  &lt;device path='/dev/mapper/mpatha' part_separator='no'/&gt;
  &lt;format type='gpt'/&gt;
&lt;/source&gt;
...</pre>
<pre class="literal-block">...
&lt;source&gt;
  &lt;adapter type='scsi_host' name='scsi_host1'/&gt;
&lt;/source&gt;
...</pre>
<pre class="literal-block">...
&lt;source&gt;
  &lt;adapter type='scsi_host'&gt;
    &lt;parentaddr unique_id='1'&gt;
      &lt;address domain='0x0000' bus='0x00' slot='0x1f' addr='0x2'/&gt;
    &lt;/parentaddr&gt;
  &lt;/adapter&gt;
&lt;/source&gt;
...</pre>
<pre class="literal-block">...
&lt;source&gt;
  &lt;adapter type='fc_host' parent='scsi_host5' wwnn='20000000c9831b4b' wwpn='10000000c9831b4b'/&gt;
&lt;/source&gt;
...</pre>
<pre class="literal-block">...
  &lt;source&gt;
    &lt;host name='localhost'/&gt;
    &lt;dir path='/var/lib/libvirt/images'/&gt;
    &lt;format type='nfs'/&gt;
    &lt;protocol ver='3'/&gt;
  &lt;/source&gt;
...</pre>
<dl>
<dt><span class="docutils literal">device</span></dt>
<dd><p>Provides the source for pools backed by physical devices (pool types <span class="docutils literal">fs</span>,
<span class="docutils literal">logical</span>, <span class="docutils literal">disk</span>, <span class="docutils literal">iscsi</span>, <span class="docutils literal"><span class="pre">iscsi-direct</span></span>, <span class="docutils literal">zfs</span>, <span class="docutils literal">vstorage</span>).
May be repeated multiple times depending on backend driver. Contains a
required attribute <span class="docutils literal">path</span> which is either the fully qualified path to the
block device node or for <span class="docutils literal">iscsi</span> or <span class="docutils literal"><span class="pre">iscsi-direct</span></span> the iSCSI Qualified
Name (IQN). <span class="since">Since 0.4.1</span></p>
<p>An optional attribute <span class="docutils literal">part_separator</span> for each <span class="docutils literal">path</span> may be supplied.
Valid values for the attribute may be either "yes" or "no". This attribute is
to be used for a <span class="docutils literal">disk</span> pool type using a <span class="docutils literal">path</span> to a device mapper
multipath device. Setting the attribute to "yes" causes libvirt to attempt to
generate and find target volume path's using a "p" separator. The default
algorithm used by device mapper is to add the "p" separator only when the
source device path ends with a number; however, it's possible to configure
the devmapper device to not use 'user_friendly_names' thus creating
partitions with the "p" separator even when the device source path does not
end with a number. <span class="since">Since 1.3.1</span></p>
</dd>
<dt><span class="docutils literal">dir</span></dt>
<dd><p>Provides the source for pools backed by directories (pool types <span class="docutils literal">dir</span>,
<span class="docutils literal">netfs</span>, <span class="docutils literal">gluster</span>), or optionally to select a subdirectory within a pool
that resembles a filesystem (pool type <span class="docutils literal">gluster</span>). May only occur once.
Contains a single attribute <span class="docutils literal">path</span> which is the fully qualified path to the
backing directory or for a <span class="docutils literal">netfs</span> pool type using <span class="docutils literal">format</span> type "cifs",
the path to the Samba share without the leading slash. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">adapter</span></dt>
<dd><p>Provides the source for pools backed by SCSI adapters (pool type <span class="docutils literal">scsi</span>).
May only occur once.</p>
<dl>
<dt><span class="docutils literal">name</span></dt>
<dd><p>The SCSI adapter name (e.g. "scsi_host1", although a name such as "host1"
is still supported for backwards compatibility, it is not recommended).
The scsi_host name to be used can be determined from the output of a
<span class="docutils literal">virsh <span class="pre">nodedev-list</span>             scsi_host</span> command followed by a
combination of <span class="docutils literal">lspci</span> and
<span class="docutils literal">virsh <span class="pre">nodedev-dumpxml</span>             scsi_hostN</span> commands to find the
<span class="docutils literal">scsi_hostN</span> to be used. <span class="since">Since 0.6.2</span></p>
<p>It is further recommended to utilize the <span class="docutils literal">parentaddr</span> element since it's
possible to have the path to which the scsi_hostN uses change between
system reboots. <span class="since">Since 1.2.7</span></p>
</dd>
<dt><span class="docutils literal">type</span></dt>
<dd><p>Specifies the adapter type. Valid values are "scsi_host" or "fc_host". If
omitted and the <span class="docutils literal">name</span> attribute is specified, then it defaults to
"scsi_host". To keep backwards compatibility, this attribute is optional
<strong>only</strong> for the "scsi_host" adapter, but is mandatory for the "fc_host"
adapter. <span class="since">Since 1.0.5</span> A "fc_host" capable scsi_hostN can be
determined by using <span class="docutils literal">virsh <span class="pre">nodedev-list</span> <span class="pre">--cap</span> fc_host</span>. <span class="since">Since
1.2.8</span></p>
<p>Note: Regardless of whether a "scsi_host" adapter type is defined using a
<span class="docutils literal">name</span> or a <span class="docutils literal">parentaddr</span>, it should refer to a real scsi_host adapter
as found through a <span class="docutils literal">virsh <span class="pre">nodedev-list</span> scsi_host</span> and
<span class="docutils literal">virsh             <span class="pre">nodedev-dumpxml</span> scsi_hostN</span> on one of the scsi_host's
displayed. It should not refer to a "fc_host" capable scsi_hostN nor
should it refer to the vHBA created for some "fc_host" adapter. For a vHBA
the <span class="docutils literal"><span class="pre">nodedev-dumpxml</span></span> output parent setting will be the "fc_host"
capable scsi_hostN value. Additionally, do not refer to an iSCSI
scsi_hostN for the "scsi_host" source. An iSCSI scsi_hostN's
<span class="docutils literal"><span class="pre">nodedev-dumpxml</span></span> output parent field is generally "computer". This is a
libvirt created parent value indicating no parent was defined for the node
device.</p>
</dd>
<dt><span class="docutils literal">wwnn</span> and <span class="docutils literal">wwpn</span></dt>
<dd><p>The required "World Wide Node Name" (<span class="docutils literal">wwnn</span>) and "World Wide Port Name"
(<span class="docutils literal">wwpn</span>) are used by the "fc_host" adapter to uniquely identify the vHBA
device in the Fibre Channel storage fabric. If the vHBA device already
exists as a Node Device, then libvirt will use it; otherwise, the vHBA
will be created using the provided values. It is considered a
configuration error use the values from the HBA as those would be for a
"scsi_host" <span class="docutils literal">type</span> pool instead. The <span class="docutils literal">wwnn</span> and <span class="docutils literal">wwpn</span> have very
specific format requirements based on the hypervisor being used, thus care
should be taken if you decide to generate your own to follow the
standards; otherwise, the pool will fail to start with an opaque error
message indicating failure to write to the vport_create file during vport
create/delete due to "No such file or directory". <span class="since">Since 1.0.4</span></p>
</dd>
<dt><span class="docutils literal">parent</span></dt>
<dd><p>Used by the "fc_host" adapter type to optionally specify the parent
scsi_host device defined in the <a class="reference external" href="formatnode.html">Node Device</a> database
as the <a class="reference external" href="https://wiki.libvirt.org/page/NPIV_in_libvirt">NPIV</a> virtual
Host Bus Adapter (vHBA). The value provided must be a vport capable
scsi_host. The value is not the scsi_host of the vHBA created by 'virsh
nodedev-create', rather it is the parent of that vHBA. If the value is not
provided, libvirt will determine the parent based either finding the
wwnn,wwpn defined for an existing scsi_host or by creating a vHBA.
Providing the parent attribute is also useful for the duplicate pool
definition checks. This is more important in environments where both the
"fc_host" and "scsi_host" source adapter pools are being used in order to
ensure a new definition doesn't duplicate using the scsi_hostN of some
existing storage pool. <span class="since">Since 1.0.4</span></p>
</dd>
<dt><span class="docutils literal">parent_wwnn</span> and <span class="docutils literal">parent_wwpn</span></dt>
<dd><p>Instead of the <span class="docutils literal">parent</span> to specify which scsi_host to use by name, it's
possible to provide the wwnn and wwpn of the parent to be used for the
vHBA in order to ensure that between reboots or after a hardware
configuration change that the scsi_host parent name doesn't change. Both
the parent_wwnn and parent_wwpn must be provided. <span class="since">Since 3.0.0</span></p>
</dd>
<dt><span class="docutils literal">parent_fabric_wwn</span></dt>
<dd><p>Instead of the <span class="docutils literal">parent</span> to specify which scsi_host to use by name, it's
possible to provide the fabric_wwn on which the scsi_host exists. This
provides flexibility for choosing a scsi_host that may be available on the
fabric rather than requiring a specific parent by wwnn or wwpn to be
available. <span class="since">Since 3.0.0</span></p>
</dd>
<dt><span class="docutils literal">managed</span></dt>
<dd><p>An optional attribute to instruct the SCSI storage backend to manage
destroying the vHBA when the pool is destroyed. For configurations that do
not provide an already created vHBA from a 'virsh nodedev-create', libvirt
will set this property to "yes". For configurations that have already
created a vHBA via 'virsh nodedev-create' and are using the wwnn/wwpn from
that vHBA and optionally the scsi_host parent, setting this attribute to
"yes" will allow libvirt to destroy the node device when the pool is
destroyed. If this attribute is set to "no" or not defined in the XML,
then libvirt will not destroy the vHBA. <span class="since">Since 1.2.11</span></p>
</dd>
<dt><span class="docutils literal">parentaddr</span></dt>
<dd><p>Used by the "scsi_host" adapter type instead of the <span class="docutils literal">name</span> attribute to
more uniquely identify the SCSI host. Using a combination of the
<span class="docutils literal">unique_id</span> attribute and the <span class="docutils literal">address</span> element to formulate a PCI
address, a search will be performed of the <span class="docutils literal">/sys/class/scsi_host/hostNN</span>
links for a matching PCI address with a matching <span class="docutils literal">unique_id</span> value in
the <span class="docutils literal">/sys/class/scsi_host/hostNN/unique_id</span> file. The value in the
"unique_id" file will be unique enough for the specific PCI address. The
<span class="docutils literal">hostNN</span> will be used by libvirt as the basis to define which SCSI host
is to be used for the currently booted system. <span class="since">Since 1.2.7</span></p>
<dl class="simple">
<dt><span class="docutils literal">address</span></dt>
<dd><p>The PCI address of the scsi_host device to be used. Using a PCI address
provides consistent naming across system reboots and kernel reloads.
The address will have four attributes: <span class="docutils literal">domain</span> (a 2-byte hex
integer, not currently used by qemu), <span class="docutils literal">bus</span> (a hex value between 0
and 0xff, inclusive), <span class="docutils literal">slot</span> (a hex value between 0x0 and 0x1f,
inclusive), and <span class="docutils literal">function</span> (a value between 0 and 7, inclusive). The
PCI address can be determined by listing the <span class="docutils literal">/sys/bus/pci/devices</span>
and the <span class="docutils literal">/sys/class/scsi_host</span> directories in order to find the
expected scsi_host device. The address will be provided in a format
such as "0000:00:1f:2" which can be used to generate the expected PCI
address "domain='0x0000' bus='0x00' slot='0x1f' function='0x0'".
Optionally, using the combination of the commands 'virsh nodedev-list
scsi_host' and 'virsh nodedev-dumpxml' for a specific list entry and
converting the resulting <span class="docutils literal">path</span> element as the basis to formulate the
correctly formatted PCI address.</p>
</dd>
<dt><span class="docutils literal">unique_id</span></dt>
<dd><p>Required <span class="docutils literal">parentaddr</span> attribute used to determine which of the
scsi_host adapters for the provided PCI address should be used. The
value is determine by contents of the <span class="docutils literal">unique_id</span> file for the
specific scsi_host adapter. For a PCI address of "0000:00:1f:2", the
unique identifier files can be found using the command
<span class="docutils literal">find <span class="pre">-H</span> <span class="pre">/sys/class/scsi_host/host*/unique_id</span> |                 xargs grep <span class="pre">'[0-9]'</span></span>.
Optionally, the <span class="docutils literal">virsh <span class="pre">nodedev-dumpxml</span> scsi_hostN</span>' of a specific
scsi_hostN list entry will list the <span class="docutils literal">unique_id</span> value.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt><span class="docutils literal">host</span></dt>
<dd><p>Provides the source for pools backed by storage from a remote server (pool
types <span class="docutils literal">netfs</span>, <span class="docutils literal">iscsi</span>, <span class="docutils literal"><span class="pre">iscsi-direct</span></span>, <span class="docutils literal">rbd</span>, <span class="docutils literal">sheepdog</span>,
<span class="docutils literal">gluster</span>). Will be used in combination with a <span class="docutils literal">directory</span> or <span class="docutils literal">device</span>
element. Contains an attribute <span class="docutils literal">name</span> which is the hostname or IP address
of the server. May optionally contain a <span class="docutils literal">port</span> attribute for the protocol
specific port number. Duplicate storage pool definition checks may perform a
cursory check that the same host name by string comparison in the new pool
does not match an existing pool's source host name when combined with the
<span class="docutils literal">directory</span> or <span class="docutils literal">device</span> element. Name resolution of the provided hostname
or IP address is left to the storage driver backend interactions with the
remote server. See the <a class="reference external" href="storage.html">storage driver page</a> for any
restrictions for specific storage backends. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">initiator</span></dt>
<dd><p>Required by the <span class="docutils literal"><span class="pre">iscsi-direct</span></span> pool in order to provide the iSCSI Qualified
Name (IQN) to communicate with the pool's <span class="docutils literal">device</span> target IQN. There is one
sub-element <span class="docutils literal">iqn</span> with the <span class="docutils literal">name</span> attribute to describe the IQN for the
initiator. <span class="since">Since 4.7.0</span></p>
</dd>
<dt><span class="docutils literal">auth</span></dt>
<dd><p>If present, the <span class="docutils literal">auth</span> element provides the authentication credentials
needed to access the source by the setting of the <span class="docutils literal">type</span> attribute (pool
types <span class="docutils literal">iscsi</span>, <span class="docutils literal"><span class="pre">iscsi-direct</span></span>, <span class="docutils literal">rbd</span>). The <span class="docutils literal">type</span> must be either
"chap" or "ceph". Use "ceph" for Ceph RBD (Rados Block Device) network
sources and use "iscsi" for CHAP (Challenge-Handshake Authentication
Protocol) iSCSI targets. Additionally a mandatory attribute <span class="docutils literal">username</span>
identifies the username to use during authentication as well as a sub-element
<span class="docutils literal">secret</span> with a mandatory attribute <span class="docutils literal">type</span>, to tie back to a <a class="reference external" href="formatsecret.html">libvirt
secret object</a> that holds the actual password or other
credentials. The domain XML intentionally does not expose the password, only
the reference to the object that manages the password. The <span class="docutils literal">secret</span> element
requires either a <span class="docutils literal">uuid</span> attribute with the UUID of the secret object or a
<span class="docutils literal">usage</span> attribute matching the key that was specified in the secret object.
<span class="since">Since 0.9.7 for "ceph" and 1.1.1 for "chap"</span></p>
</dd>
<dt><span class="docutils literal">name</span></dt>
<dd><p>Provides the source for pools backed by storage from a named element (pool
types <span class="docutils literal">logical</span>, <span class="docutils literal">rbd</span>, <span class="docutils literal">sheepdog</span>, <span class="docutils literal">gluster</span>). Contains a string
identifier. <span class="since">Since 0.4.5</span></p>
</dd>
<dt><span class="docutils literal">format</span></dt>
<dd><p>Provides information about the format of the pool (pool types <span class="docutils literal">fs</span>,
<span class="docutils literal">netfs</span>, <span class="docutils literal">disk</span>, <span class="docutils literal">logical</span>). This contains a single attribute <span class="docutils literal">type</span>
whose value is backend specific. This is typically used to indicate
filesystem type, or network filesystem type, or partition table type, or LVM
metadata type. All drivers are required to have a default value for this, so
it is optional. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">protocol</span></dt>
<dd><p>For a <span class="docutils literal">netfs</span> Storage Pool provide a mechanism to define which NFS protocol
version number will be used to contact the server's NFS service. The
attribute <span class="docutils literal">ver</span> accepts an unsigned integer as the version number to use.
<span class="since">Since 5.1.0</span></p>
</dd>
<dt><span class="docutils literal">vendor</span></dt>
<dd><p>Provides optional information about the vendor of the storage device. This
contains a single attribute <span class="docutils literal">name</span> whose value is backend specific.
<span class="since">Since 0.8.4</span></p>
</dd>
<dt><span class="docutils literal">product</span></dt>
<dd><p>Provides an optional product name of the storage device. This contains a
single attribute <span class="docutils literal">name</span> whose value is backend specific. <span class="since">Since
0.8.4</span></p>
</dd>
</dl>
</div>
<div class="section" id="storage-pool-target-elements">
<h2><a class="toc-backref" href="#id5">Storage pool target elements</a><a class="headerlink" href="#storage-pool-target-elements" title="Link to this headline">¶</a></h2>
<p>A single <span class="docutils literal">target</span> element is contained within the top level <span class="docutils literal">pool</span> element
for some types of pools (pool types <span class="docutils literal">dir</span>, <span class="docutils literal">fs</span>, <span class="docutils literal">netfs</span>, <span class="docutils literal">logical</span>,
<span class="docutils literal">disk</span>, <span class="docutils literal">iscsi</span>, <span class="docutils literal">scsi</span>, <span class="docutils literal">mpath</span>, <span class="docutils literal">zfs</span>). This tag is used to describe
the mapping of the storage pool into the host filesystem. It can contain the
following child elements:</p>
<pre class="literal-block">  ...
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
    &lt;permissions&gt;
      &lt;owner&gt;107&lt;/owner&gt;
      &lt;group&gt;107&lt;/group&gt;
      &lt;mode&gt;0744&lt;/mode&gt;
      &lt;label&gt;virt_image_t&lt;/label&gt;
    &lt;/permissions&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">path</span></dt>
<dd><p>Provides the location at which the pool will be mapped into the local
filesystem namespace, as an absolute path. For a filesystem/directory based
pool it will be a fully qualified name of the directory in which volumes will
be created. For device based pools it will be a fully qualified name of the
directory in which devices nodes exist. For the latter <span class="docutils literal">/dev/</span> may seem
like the logical choice, however, devices nodes there are not guaranteed
stable across reboots, since they are allocated on demand. It is preferable
to use a stable location such as one of the
<span class="docutils literal"><span class="pre">/dev/disk/by-{path|id|uuid|label}</span></span> locations. For <span class="docutils literal">logical</span> and <span class="docutils literal">zfs</span>
pool types, a provided value is ignored and a default path generated. For a
Multipath pool (type <span class="docutils literal">mpath</span>), the provided value is ignored and the
default value of "/dev/mapper" is used. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">permissions</span></dt>
<dd><p>This is currently only useful for directory or filesystem based pools, which
are mapped as a directory into the local filesystem namespace. It provides
information about the permissions to use for the final directory when the
pool is built. There are 4 child elements. The <span class="docutils literal">mode</span> element contains the
octal permission set. The <span class="docutils literal">mode</span> defaults to 0711 when not provided. The
<span class="docutils literal">owner</span> element contains the numeric user ID. The <span class="docutils literal">group</span> element
contains the numeric group ID. If <span class="docutils literal">owner</span> or <span class="docutils literal">group</span> aren't specified
when creating a directory, the UID and GID of the libvirtd process are used.
The <span class="docutils literal">label</span> element contains the MAC (eg SELinux) label string.
<span class="since">Since 0.4.1</span> For running directory or filesystem based pools, these
fields will be filled with the values used by the existing directory.
<span class="since">Since 1.2.16</span></p>
</dd>
</dl>
</div>
<div class="section" id="device-extents">
<h2><a class="toc-backref" href="#id6">Device extents</a><a class="headerlink" href="#device-extents" title="Link to this headline">¶</a></h2>
<p>If a storage pool exposes information about its underlying placement /
allocation scheme, the <span class="docutils literal">device</span> element within the <span class="docutils literal">source</span> element may
contain information about its available extents. Some pools have a constraint
that a volume must be allocated entirely within a single constraint (eg disk
partition pools). Thus the extent information allows an application to determine
the maximum possible size for a new volume</p>
<p>For storage pools supporting extent information, within each <span class="docutils literal">device</span> element
there will be zero or more <span class="docutils literal">freeExtent</span> elements. Each of these elements
contains two attributes, <span class="docutils literal">start</span> and <span class="docutils literal">end</span> which provide the boundaries of
the extent on the device, measured in bytes. <span class="since">Since 0.4.1</span></p>
</div>
<div class="section" id="refresh-overrides">
<h2><a class="toc-backref" href="#id7">Refresh overrides</a><a class="headerlink" href="#refresh-overrides" title="Link to this headline">¶</a></h2>
<p>The optional <span class="docutils literal">refresh</span> element can control how the pool and associated volumes
are refreshed (pool type <span class="docutils literal">rbd</span>). The <span class="docutils literal">allocation</span> attribute of the
<span class="docutils literal">volume</span> child element controls the method used for computing the allocation
of a volume. The valid attribute values are <span class="docutils literal">default</span> to compute the actual
usage or <span class="docutils literal">capacity</span> to use the logical capacity for cases where computing the
allocation is too expensive. The following XML snippet shows the syntax:</p>
<pre class="literal-block">&lt;pool type="rbd"&gt;
  &lt;name&gt;myrbdpool&lt;/name&gt;
...
  &lt;source/&gt;
...
  &lt;refresh&gt;
    &lt;volume allocation='capacity'/&gt;
  &lt;/refresh&gt;
...
&lt;/pool&gt;</pre>
<p><span class="since">Since 5.2.0</span></p>
</div>
<div class="section" id="storage-pool-namespaces">
<h2><a class="toc-backref" href="#id8">Storage Pool Namespaces</a><a class="headerlink" href="#storage-pool-namespaces" title="Link to this headline">¶</a></h2>
<p>Usage of Storage Pool Namespaces provides a mechanism to provide pool type
specific data in a free form or arbitrary manner via XML syntax targeted solely
for the needs of the specific pool type which is not otherwise supported in
standard XML. For the "fs" and "netfs" pool types this provides a mechanism to
provide additional mount options on the command line. For the "rbd" pool this
provides a mechanism to override default settings for RBD configuration options.</p>
<p>Usage of namespaces comes with no support guarantees. It is intended for
developers testing out a concept prior to requesting an explicitly supported XML
option in libvirt, and thus should never be used in production.</p>
<dl>
<dt><span class="docutils literal">fs:mount_opts</span></dt>
<dd><p>Provides an XML namespace mechanism to optionally utilize specifically named
options for the mount command via the "-o" option for the <span class="docutils literal">fs</span> or <span class="docutils literal">netfs</span>
type storage pools. In order to designate that the Storage Pool will be using
the mechanism, the <span class="docutils literal">pool</span> element must be modified to provide the XML
namespace attribute syntax as follows:</p>
<p>xmlns:fs='http://libvirt.org/schemas/storagepool/fs/1.0'</p>
<p>The <span class="docutils literal">fs:mount_opts</span> defines the mount options by specifying multiple
<span class="docutils literal">fs:option</span> subelements with the attribute <span class="docutils literal">name</span> specifying the mount
option to be added. The value of the named option is not checked since it's
possible options don't exist on all distributions. It is expected that proper
and valid options will be supplied for the target host.</p>
<p>The following XML snippet shows the syntax required in order to utilize for a
netfs pool:</p>
<pre class="literal-block">&lt;pool type="netfs" xmlns:fs='http://libvirt.org/schemas/storagepool/fs/1.0'&gt;
  &lt;name&gt;nfsimages&lt;/name&gt;
...
  &lt;source&gt;
...
  &lt;/source&gt;
...
  &lt;target&gt;
...
  &lt;/target&gt;
  &lt;fs:mount_opts&gt;
    &lt;fs:option name='sync'/&gt;
    &lt;fs:option name='lazytime'/&gt;
  &lt;/fs:mount_opts&gt;
&lt;/pool&gt;
...</pre>
<p><span class="since">Since 5.1.0.</span></p>
</dd>
<dt><span class="docutils literal">rbd:config_opts</span></dt>
<dd><p>Provides an XML namespace mechanism to optionally utilize specifically named
options for the RBD configuration options via the rados_conf_set API for the
<span class="docutils literal">rbd</span> type storage pools. In order to designate that the Storage Pool will
be using the mechanism, the <span class="docutils literal">pool</span> element must be modified to provide the
XML namespace attribute syntax as follows:</p>
<p>xmlns:rbd='http://libvirt.org/schemas/storagepool/rbd/1.0'</p>
<p>The <span class="docutils literal">rbd:config_opts</span> defines the configuration options by specifying
multiple <span class="docutils literal">rbd:option</span> subelements with the attribute <span class="docutils literal">name</span> specifying
the configuration option to be added and <span class="docutils literal">value</span> specifying the
configuration option value. The name and value for each option is only
checked to be not empty. The name and value provided are not checked since
it's possible options don't exist on all distributions. It is expected that
proper and valid options will be supplied for the target host.</p>
<p>The following XML snippet shows the syntax required in order to utilize</p>
<pre class="literal-block">&lt;pool type="rbd" xmlns:rbd='http://libvirt.org/schemas/storagepool/rbd/1.0'&gt;
  &lt;name&gt;myrbdpool&lt;/name&gt;
...
  &lt;source&gt;
...
  &lt;/source&gt;
...
  &lt;target&gt;
...
  &lt;/target&gt;
...
  &lt;rbd:config_opts&gt;
    &lt;rbd:option name='client_mount_timeout' value='45'/&gt;
    &lt;rbd:option name='rados_mon_op_timeout' value='20'/&gt;
    &lt;rbd:option name='rados_osd_op_timeout' value='10'/&gt;
  &lt;/rbd:config_opts&gt;
&lt;/pool&gt;</pre>
<p><span class="since">Since 5.1.0.</span></p>
</dd>
</dl>
</div>
</div>
<div class="section" id="storage-volume-xml">
<h1><a class="toc-backref" href="#id9">Storage volume XML</a><a class="headerlink" href="#storage-volume-xml" title="Link to this headline">¶</a></h1>
<p>A storage volume will generally be either a file or a device node; <span class="since">since
1.2.0</span> , an optional output-only attribute <span class="docutils literal">type</span> lists the actual type (file,
block, dir, network, netdir or ploop), which is also available from
<span class="docutils literal">virStorageVolGetInfo()</span>. The storage volume XML format is available
<span class="since">since 0.4.1</span></p>
<div class="section" id="storage-volume-general-metadata">
<h2><a class="toc-backref" href="#id10">Storage volume general metadata</a><a class="headerlink" href="#storage-volume-general-metadata" title="Link to this headline">¶</a></h2>
<pre class="literal-block">&lt;volume type='file'&gt;
  &lt;name&gt;sparse.img&lt;/name&gt;
  &lt;key&gt;/var/lib/xen/images/sparse.img&lt;/key&gt;
  &lt;allocation&gt;0&lt;/allocation&gt;
  &lt;capacity unit="T"&gt;1&lt;/capacity&gt;
  ...</pre>
<dl class="simple">
<dt><span class="docutils literal">name</span></dt>
<dd><p>Providing a name for the volume which is unique to the pool. This is
mandatory when defining a volume. For a disk pool, the name must be
combination of the <span class="docutils literal">source</span> device path device and next partition number to
be created. For example, if the <span class="docutils literal">source</span> device path is /dev/sdb and there
are no partitions on the disk, then the name must be sdb1 with the next name
being sdb2 and so on. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">key</span></dt>
<dd><p>Providing an identifier for the volume which identifies a single volume. In
some cases it's possible to have two distinct keys identifying a single
volume. This field cannot be set when creating a volume: it is always
generated. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">allocation</span></dt>
<dd><p>Providing the total storage allocation for the volume. This may be smaller
than the logical capacity if the volume is sparsely allocated. It may also be
larger than the logical capacity if the volume has substantial metadata
overhead. This value is in bytes. If omitted when creating a volume, the
volume will be fully allocated at time of creation. If set to a value smaller
than the capacity, the pool has the <strong>option</strong> of deciding to sparsely
allocate a volume. It does not have to honour requests for sparse allocation
though. Different types of pools may treat sparse volumes differently. For
example, the <span class="docutils literal">logical</span> pool will not automatically expand volume's
allocation when it gets full; the user is responsible for doing that or
configuring dmeventd to do so automatically.
By default this is specified in bytes, but an optional attribute <span class="docutils literal">unit</span> can
be specified to adjust the passed value. Values can be: 'B' or 'bytes' for
bytes, 'KB' (kilobytes, 10<sup>3</sup> or 1000 bytes), 'K' or 'KiB' (kibibytes,
2<sup>10</sup> or 1024 bytes), 'MB' (megabytes, 10<sup>6</sup> or 1,000,000
bytes), 'M' or 'MiB' (mebibytes, 2<sup>20</sup> or 1,048,576 bytes), 'GB'
(gigabytes, 10<sup>9</sup> or 1,000,000,000 bytes), 'G' or 'GiB' (gibibytes,
2<sup>30</sup> or 1,073,741,824 bytes), 'TB' (terabytes, 10<sup>12</sup> or
1,000,000,000,000 bytes), 'T' or 'TiB' (tebibytes, 2<sup>40</sup> or
1,099,511,627,776 bytes), 'PB' (petabytes, 10<sup>15</sup> or
1,000,000,000,000,000 bytes), 'P' or 'PiB' (pebibytes, 2<sup>50</sup> or
1,125,899,906,842,624 bytes), 'EB' (exabytes, 10<sup>18</sup> or
1,000,000,000,000,000,000 bytes), or 'E' or 'EiB' (exbibytes, 2<sup>60</sup> or
1,152,921,504,606,846,976 bytes). <span class="since">Since 0.4.1</span>, multi-character
<span class="docutils literal">unit</span> <span class="since">since 0.9.11</span>.</p>
</dd>
<dt><span class="docutils literal">capacity</span></dt>
<dd><p>Providing the logical capacity for the volume. This value is in bytes by
default, but a <span class="docutils literal">unit</span> attribute can be specified with the same semantics as
for <span class="docutils literal">allocation</span> This is compulsory when creating a volume. <span class="since">Since
0.4.1</span></p>
</dd>
<dt><span class="docutils literal">physical</span></dt>
<dd><p>This output only element provides the host physical size of the target
storage volume. The default output <span class="docutils literal">unit</span> will be in bytes. <span class="since">Since
3.0.0</span></p>
</dd>
<dt><span class="docutils literal">source</span></dt>
<dd><p>Provides information about the underlying storage allocation of the volume.
This may not be available for some pool types. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">target</span></dt>
<dd><p>Provides information about the representation of the volume on the local
host. <span class="since">Since 0.4.1</span></p>
</dd>
</dl>
</div>
<div class="section" id="storage-volume-target-elements">
<h2><a class="toc-backref" href="#id11">Storage volume target elements</a><a class="headerlink" href="#storage-volume-target-elements" title="Link to this headline">¶</a></h2>
<p>A single <span class="docutils literal">target</span> element is contained within the top level <span class="docutils literal">volume</span>
element. This tag is used to describe the mapping of the storage volume into the
host filesystem. It can contain the following child elements:</p>
<pre class="literal-block">...
&lt;target&gt;
  &lt;path&gt;/var/lib/virt/images/sparse.img&lt;/path&gt;
  &lt;format type='qcow2'/&gt;
  &lt;permissions&gt;
    &lt;owner&gt;107&lt;/owner&gt;
    &lt;group&gt;107&lt;/group&gt;
    &lt;mode&gt;0744&lt;/mode&gt;
    &lt;label&gt;virt_image_t&lt;/label&gt;
  &lt;/permissions&gt;
  &lt;timestamps&gt;
    &lt;atime&gt;1341933637.273190990&lt;/atime&gt;
    &lt;mtime&gt;1341930622.047245868&lt;/mtime&gt;
    &lt;ctime&gt;1341930622.047245868&lt;/ctime&gt;
  &lt;/timestamps&gt;
  &lt;encryption type='...'&gt;
    ...
  &lt;/encryption&gt;
  &lt;compat&gt;1.1&lt;/compat&gt;
  &lt;nocow/&gt;
  &lt;clusterSize unit='KiB'&gt;64&lt;/clusterSize&gt;
  &lt;features&gt;
    &lt;lazy_refcounts/&gt;
    &lt;extended_l2/&gt;
  &lt;/features&gt;
&lt;/target&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">path</span></dt>
<dd><p>Provides the location at which the volume can be accessed on the local
filesystem, as an absolute path. This is a readonly attribute, so shouldn't
be specified when creating a volume. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">format</span></dt>
<dd><p>Provides information about the pool specific volume format. For disk pools it
will provide the partition table format type, but is not preserved after a
pool refresh or libvirtd restart. Use extended in order to create an extended
disk extent partition. For filesystem or directory pools it will provide the
file format type, eg cow, qcow, vmdk, raw. If omitted when creating a volume,
the pool's default format will be used. The actual format is specified via
the <span class="docutils literal">type</span> attribute. Consult the <a class="reference external" href="storage.html">storage driver page</a>
for the list of valid volume format type values for each specific pool. The
<span class="docutils literal">format</span> will be ignored on input for pools without a volume format type
value and the default pool format will be used. <span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">permissions</span></dt>
<dd><p>Provides information about the permissions to use when creating volumes. This
is currently only useful for directory or filesystem based pools, where the
volumes allocated are simple files. For pools where the volumes are device
nodes, the hotplug scripts determine permissions. There are 4 child elements.
The <span class="docutils literal">mode</span> element contains the octal permission set. The <span class="docutils literal">mode</span> defaults
to 0600 when not provided. The <span class="docutils literal">owner</span> element contains the numeric user
ID. The <span class="docutils literal">group</span> element contains the numeric group ID. If <span class="docutils literal">owner</span> or
<span class="docutils literal">group</span> aren't specified when creating a supported volume, the UID and GID
of the libvirtd process are used. The <span class="docutils literal">label</span> element contains the MAC (eg
SELinux) label string. For existing directory or filesystem based volumes,
these fields will be filled with the values used by the existing file.
<span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">timestamps</span></dt>
<dd><p>Provides timing information about the volume. Up to four sub-elements are
present, where <span class="docutils literal">atime</span>, <span class="docutils literal">btime</span>, <span class="docutils literal">ctime</span> and <span class="docutils literal">mtime</span> hold the access,
birth, change and modification time of the volume, where known. The used time
format is &lt;seconds&gt;.&lt;nanoseconds&gt; since the beginning of the epoch (1 Jan
1970). If nanosecond resolution is 0 or otherwise unsupported by the host OS
or filesystem, then the nanoseconds part is omitted. This is a readonly
attribute and is ignored when creating a volume. <span class="since">Since 0.10.0</span></p>
</dd>
<dt><span class="docutils literal">encryption</span></dt>
<dd><p>If present, specifies how the volume is encrypted. See the <a class="reference external" href="formatstorageencryption.html">Storage
Encryption</a> page for more information.</p>
</dd>
<dt><span class="docutils literal">compat</span></dt>
<dd><p>Specify compatibility level. So far, this is only used for <span class="docutils literal"><span class="pre">type='qcow2'</span></span>
volumes. Valid values are <span class="docutils literal">0.10</span> and <span class="docutils literal">1.1</span> so far, specifying QEMU
version the images should be compatible with. If the <span class="docutils literal">feature</span> element is
present, 1.1 is used. <span class="since">Since 1.1.0</span> If omitted, 0.10 is used.
<span class="since">Since 1.1.2</span></p>
</dd>
<dt><span class="docutils literal">nocow</span></dt>
<dd><p>Turn off COW of the newly created volume. So far, this is only valid for a
file image in btrfs file system. It will improve performance when the file
image is used in VM. To create non-raw file images, it requires QEMU version
since 2.1. <span class="since">Since 1.2.7</span></p>
</dd>
<dt><span class="docutils literal">clusterSize</span></dt>
<dd><p>Changes the qcow2 cluster size which can affect image file size and
performance. <span class="since">Since 7.4.0</span></p>
</dd>
<dt><span class="docutils literal">features</span></dt>
<dd><p>Format-specific features. Only used for <span class="docutils literal">qcow2</span> now. Valid sub-elements
are:</p>
<ul class="simple">
<li><p><span class="docutils literal">&lt;lazy_refcounts/&gt;</span> - allow delayed reference counter updates.
<span class="since">Since 1.1.0</span></p></li>
<li><p><span class="docutils literal">&lt;extended_l2/&gt;</span> - enables subcluster allocation for qcow2 images. QCOW2
clusters are split into 32 subclusters decreasing the size of L2 cache
needed. It's recommended to increase <span class="docutils literal">clusterSize</span>.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="backing-store-elements">
<h2><a class="toc-backref" href="#id12">Backing store elements</a><a class="headerlink" href="#backing-store-elements" title="Link to this headline">¶</a></h2>
<p>A single <span class="docutils literal">backingStore</span> element is contained within the top level <span class="docutils literal">volume</span>
element. This tag is used to describe the optional copy on write, backing store
for the storage volume. It can contain the following child elements:</p>
<pre class="literal-block">  ...
  &lt;backingStore&gt;
    &lt;path&gt;/var/lib/virt/images/master.img&lt;/path&gt;
    &lt;format type='raw'/&gt;
    &lt;permissions&gt;
      &lt;owner&gt;107&lt;/owner&gt;
      &lt;group&gt;107&lt;/group&gt;
      &lt;mode&gt;0744&lt;/mode&gt;
      &lt;label&gt;virt_image_t&lt;/label&gt;
    &lt;/permissions&gt;
  &lt;/backingStore&gt;
&lt;/volume&gt;</pre>
<dl class="simple">
<dt><span class="docutils literal">path</span></dt>
<dd><p>Provides the location at which the backing store can be accessed on the local
filesystem, as an absolute path. If omitted, there is no backing store for
this volume. <span class="since">Since 0.6.0</span></p>
</dd>
<dt><span class="docutils literal">format</span></dt>
<dd><p>Provides information about the pool specific backing store format. For disk
pools it will provide the partition type. For filesystem or directory pools
it will provide the file format type, eg cow, qcow, vmdk, raw. The actual
format is specified via the type attribute. Consult the pool-specific docs
for the list of valid values. Most file formats require a backing store of
the same format, however, the qcow2 format allows a different backing store
format. <span class="since">Since 0.6.0</span></p>
</dd>
<dt><span class="docutils literal">permissions</span></dt>
<dd><p>Provides information about the permissions of the backing file. See volume
<span class="docutils literal">permissions</span> documentation for explanation of individual fields.
<span class="since">Since 0.6.0</span></p>
</dd>
</dl>
</div>
</div>
<div class="section" id="example-configuration">
<h1><a class="toc-backref" href="#id13">Example configuration</a><a class="headerlink" href="#example-configuration" title="Link to this headline">¶</a></h1>
<p>Here are a couple of examples, for a more complete set demonstrating every type
of storage pool, consult the <a class="reference external" href="storage.html">storage driver page</a></p>
<div class="section" id="file-based-storage-pool">
<h2><a class="toc-backref" href="#id14">File based storage pool</a><a class="headerlink" href="#file-based-storage-pool" title="Link to this headline">¶</a></h2>
<pre class="literal-block">&lt;pool type="dir"&gt;
  &lt;name&gt;virtimages&lt;/name&gt;
  &lt;target&gt;
    &lt;path&gt;/var/lib/virt/images&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre>
</div>
<div class="section" id="iscsi-based-storage-pool">
<h2><a class="toc-backref" href="#id15">iSCSI based storage pool</a><a class="headerlink" href="#iscsi-based-storage-pool" title="Link to this headline">¶</a></h2>
<pre class="literal-block">&lt;pool type="iscsi"&gt;
  &lt;name&gt;virtimages&lt;/name&gt;
  &lt;source&gt;
    &lt;host name="iscsi.example.com"/&gt;
    &lt;device path="iqn.2013-06.com.example:iscsi-pool"/&gt;
    &lt;auth type='chap' username='myuser'&gt;
      &lt;secret usage='libvirtiscsi'/&gt;
    &lt;/auth&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre>
</div>
<div class="section" id="storage-volume">
<h2><a class="toc-backref" href="#id16">Storage volume</a><a class="headerlink" href="#storage-volume" title="Link to this headline">¶</a></h2>
<pre class="literal-block">&lt;volume&gt;
  &lt;name&gt;sparse.img&lt;/name&gt;
  &lt;allocation&gt;0&lt;/allocation&gt;
  &lt;capacity unit="T"&gt;1&lt;/capacity&gt;
  &lt;target&gt;
    &lt;path&gt;/var/lib/virt/images/sparse.img&lt;/path&gt;
    &lt;permissions&gt;
      &lt;owner&gt;107&lt;/owner&gt;
      &lt;group&gt;107&lt;/group&gt;
      &lt;mode&gt;0744&lt;/mode&gt;
      &lt;label&gt;virt_image_t&lt;/label&gt;
    &lt;/permissions&gt;
  &lt;/target&gt;
&lt;/volume&gt;</pre>
</div>
<div class="section" id="storage-volume-using-luks">
<h2><a class="toc-backref" href="#id17">Storage volume using LUKS</a><a class="headerlink" href="#storage-volume-using-luks" title="Link to this headline">¶</a></h2>
<pre class="literal-block">&lt;volume&gt;
  &lt;name&gt;MyLuks.img&lt;/name&gt;
  &lt;capacity unit="G"&gt;5&lt;/capacity&gt;
  &lt;target&gt;
    &lt;path&gt;/var/lib/virt/images/MyLuks.img&lt;/path&gt;
    &lt;format type='raw'/&gt;
    &lt;encryption format='luks'&gt;
      &lt;secret type='passphrase' uuid='f52a81b2-424e-490c-823d-6bd4235bc572'/&gt;
    &lt;/encryption&gt;
  &lt;/target&gt;
&lt;/volume&gt;</pre>
</div>
</div>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="downloads.html">Download</a>
          </li>
          <li>
            <a href="contribute.html">Contribute</a>
          </li>
          <li>
            <a href="docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/formatstorage.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
