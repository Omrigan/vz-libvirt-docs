<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/daemons.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: Libvirt Daemons</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="libvirt-daemons">
<h1>Libvirt Daemons</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#architectural-options" id="id1">Architectural options</a></p>
<ul>
<li><p><a class="reference internal" href="#monolithic-vs-modular-daemons" id="id2">Monolithic vs modular daemons</a></p></li>
<li><p><a class="reference internal" href="#operating-modes" id="id3">Operating modes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#monolithic-driver-daemon" id="id4">Monolithic driver daemon</a></p>
<ul>
<li><p><a class="reference internal" href="#monolithic-sockets" id="id5">Monolithic sockets</a></p></li>
<li><p><a class="reference internal" href="#monolithic-systemd-integration" id="id6">Monolithic Systemd Integration</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#modular-driver-daemons" id="id7">Modular driver daemons</a></p>
<ul>
<li><p><a class="reference internal" href="#modular-sockets" id="id8">Modular Sockets</a></p></li>
<li><p><a class="reference internal" href="#modular-systemd-integration" id="id9">Modular Systemd Integration</a></p></li>
<li><p><a class="reference internal" href="#switching-to-modular-daemons" id="id10">Switching to modular daemons</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#checking-whether-modular-monolithic-mode-is-in-use" id="id11">Checking whether modular/monolithic mode is in use</a></p></li>
<li><p><a class="reference internal" href="#proxy-daemon" id="id12">Proxy daemon</a></p>
<ul>
<li><p><a class="reference internal" href="#proxy-sockets" id="id13">Proxy sockets</a></p></li>
<li><p><a class="reference internal" href="#proxy-systemd-integration" id="id14">Proxy Systemd Integration</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#logging-daemon" id="id15">Logging daemon</a></p>
<ul>
<li><p><a class="reference internal" href="#logging-sockets" id="id16">Logging Sockets</a></p></li>
<li><p><a class="reference internal" href="#logging-systemd-integration" id="id17">Logging Systemd Integration</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#locking-daemon" id="id18">Locking daemon</a></p>
<ul>
<li><p><a class="reference internal" href="#locking-sockets" id="id19">Locking Sockets</a></p></li>
<li><p><a class="reference internal" href="#locking-systemd-integration" id="id20">Locking Systemd Integration</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#changing-command-line-options-for-daemons" id="id21">Changing command line options for daemons</a></p></li>
</ul>
</div>
<p>A libvirt deployment for accessing one of the stateful drivers will require
one or more daemons to be deployed on the virtualization host. There are a
number of ways the daemons can be configured which will be outlined in this
page.</p>
<div class="section" id="architectural-options">
<h1><a class="toc-backref" href="#id1">Architectural options</a><a class="headerlink" href="#architectural-options" title="Link to this headline">¶</a></h1>
<div class="section" id="monolithic-vs-modular-daemons">
<h2><a class="toc-backref" href="#id2">Monolithic vs modular daemons</a><a class="headerlink" href="#monolithic-vs-modular-daemons" title="Link to this headline">¶</a></h2>
<p>Traditionally libvirt provided a single monolithic daemon called <span class="docutils literal">libvirtd</span>
which exposed support for all the stateful drivers, both primary hypervisor
drivers and secondary supporting drivers. It also enables secure remote access
from clients running off host.</p>
<p>Work is underway for the monolithic daemon to be replaced by a new set of
modular daemons <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span>, each one servicing a single stateful
driver. A further <span class="docutils literal">virtproxyd</span> daemon will provide secure remote access, as
well as backcompatibility for clients using the UNIX socket path of the
monolithic daemon.</p>
<p>The change to modular daemons should not affect API functionality used by
management applications. It will, however, have an impact on host provisioning
tools since there are new systemd services and configuration files to be
managed.</p>
<p>Currently both monolithic and modular daemons are built by default, but the RPC
client still prefers connecting to the monolithic daemon. It is intended to
switch the RPC client to prefer the modular daemons in the near future. At
least 1 year after this switch (but not more than 2 years), the monolithic
daemon will be deleted entirely.</p>
</div>
<div class="section" id="operating-modes">
<h2><a class="toc-backref" href="#id3">Operating modes</a><a class="headerlink" href="#operating-modes" title="Link to this headline">¶</a></h2>
<p>The libvirt daemons, whether monolithic or modular, can often operate in two
modes</p>
<ul>
<li><p><em>System mode</em> - the daemon is running as the root user account, enabling
access to its full range of functionality. A read-write connection to
daemons in system mode <strong>typically implies privileges equivalent to having
a root shell</strong>. Suitable <a class="reference external" href="auth.html">authentication mechanisms</a> <strong>must
be enabled</strong> to secure it against untrustworthy clients/users.</p></li>
<li><p><em>Session mode</em> - the daemon is running as any non-root user account,
providing access to a more restricted range of functionality. Only client
apps/users running under <strong>the same UID are permitted to connect</strong>, thus a
connection does not imply any elevation of privileges.</p>
<p>Not all drivers support session mode and as such the corresponding
modular daemon may not support running in this mode</p>
</li>
</ul>
</div>
</div>
<div class="section" id="monolithic-driver-daemon">
<h1><a class="toc-backref" href="#id4">Monolithic driver daemon</a><a class="headerlink" href="#monolithic-driver-daemon" title="Link to this headline">¶</a></h1>
<p>The monolithic daemon is known as <span class="docutils literal">libvirtd</span> and has historically been the
default in libvirt. It is configured via the file <span class="docutils literal">/etc/libvirt/libvirtd.conf</span></p>
<div class="section" id="monolithic-sockets">
<h2><a class="toc-backref" href="#id5">Monolithic sockets</a><a class="headerlink" href="#monolithic-sockets" title="Link to this headline">¶</a></h2>
<p>When running in system mode, <span class="docutils literal">libvirtd</span> exposes three UNIX domain sockets, and
optionally, one or two TCP sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-sock</span></span> - the primary socket for accessing libvirt
APIs, with full read-write privileges. A connection to this socket gives the
client privileges that are equivalent to having a root shell. This is the
socket that most management applications connect to by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-sock-ro</span></span> - the secondary socket for accessing
libvirt APIs, with limited read-only privileges. A connection to this socket
gives the ability to query the existence of objects and monitor some aspects
of their operation. This is the socket that most management applications
connect to when requesting read only mode. Typically this is what a
monitoring app would use.</p></li>
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-admin-sock</span></span> - the administrative socket for
controlling operation of the daemon itself (as opposed to drivers it is
running). This can be used to dynamically reconfigure some aspects of the
daemon and monitor/control connected clients.</p></li>
<li><p><span class="docutils literal">TCP 16509</span> - the non-TLS socket for remotely accessing the libvirt APIs,
with full read-write privileges. A connection to this socket gives the
client privileges that are equivalent to having a root shell. Since it does
not use TLS, an <a class="reference external" href="auth.html">authentication mechanism</a> that provides
encryption must be used. Only the GSSAPI/Kerberos mechanism is capable of
satisfying this requirement. In general applications should not use this
socket except for debugging in a development/test environment.</p></li>
<li><p><span class="docutils literal">TCP 16514</span> - the TLS socket for remotely accessing the libvirt APIs,
with full read-write privileges. A connection to this socket gives the
client privileges that are equivalent to having a root shell. Access control
can be enforced either through validation of <a class="reference external" href="kbase/tlscerts.html">x509 certificates</a>, and/or by enabling an <a class="reference external" href="auth.html">authentication mechanism</a>.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/run</span> instead of <span class="docutils literal">/var/run</span>.</p>
<p>When running in session mode, <span class="docutils literal">libvirtd</span> exposes two UNIX domain sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/libvirt-sock</span></span> - the primary socket for accessing
libvirt APIs, with full read-write privileges. A connection to this socket
does not alter the privileges that the client already has. This is the
socket that most management applications connect to by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/libvirt-admin-sock</span></span> - the administrative socket
for controlling operation of the daemon itself (as opposed to drivers it is
running). This can be used to dynamically reconfigure some aspects of the
daemon and monitor/control connected clients.</p></li>
</ul>
<p>Notice that the session mode does not have a separate read-only socket. Since
the clients must be running as the same user as the daemon itself, there is
not any security benefit from attempting to enforce a read-only mode.</p>
<p><span class="docutils literal">$XDG_RUNTIME_DIR</span> commonly points to a per-user private location on tmpfs,
such as <span class="docutils literal"><span class="pre">/run/user/$UID</span></span>.</p>
</div>
<div class="section" id="monolithic-systemd-integration">
<h2><a class="toc-backref" href="#id6">Monolithic Systemd Integration</a><a class="headerlink" href="#monolithic-systemd-integration" title="Link to this headline">¶</a></h2>
<p>When the <span class="docutils literal">libvirtd</span> daemon is managed by <span class="docutils literal">systemd</span> a number of desirable
features are available, most notably socket activation.</p>
<p>Libvirt ships a number of unit files for controlling <span class="docutils literal">libvirtd</span>:</p>
<ul class="simple">
<li><p><span class="docutils literal">libvirtd.service</span> - the main unit file for launching the <span class="docutils literal">libvirtd</span>
daemon in system mode. The command line arguments passed can be configured by
editing <span class="docutils literal">/etc/sysconfig/libvirtd</span>. This is typically only needed to control
the use of the auto shutdown timeout value. It is recommended that this
service unit be configured to start on boot. This is because various
libvirt drivers support autostart of their objects. If it is known that
autostart is not required, this unit can be left to start on demand.</p></li>
<li><p><span class="docutils literal">libvirtd.socket</span> - the unit file corresponding to the main read-write
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-sock</span></span>. This socket is recommended to
be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">libvirtd-ro.socket</span></span> - the unit file corresponding to the main read-only
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-sock-ro</span></span>. This socket is recommended
to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">libvirtd-admin.socket</span></span> - the unit file corresponding to the administrative
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-admin-sock</span></span>. This socket is
recommended to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">libvirtd-tcp.socket</span></span> - the unit file corresponding to the TCP 16509 port
for non-TLS remote access. This socket should not be configured to start on
boot until the administrator has configured a suitable authentication
mechanism.</p></li>
<li><p><span class="docutils literal"><span class="pre">libvirtd-tls.socket</span></span> - the unit file corresponding to the TCP 16509 port
for TLS remote access. This socket should not be configured to start on boot
until the administrator has deployed x509 certificates and optionally
configured a suitable authentication mechanism.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/etc/default</span> instead of <span class="docutils literal">/etc/sysconfig</span>.</p>
<p>The socket unit files are newly introduced in 5.6.0. On newly installed hosts
the UNIX socket units should be enabled by default. When upgrading an existing
host from a previous version of libvirt, the socket unit files will be masked
if <span class="docutils literal">libvirtd</span> is currently configured to use the <span class="docutils literal"><span class="pre">--listen</span></span> argument, since
the <span class="docutils literal"><span class="pre">--listen</span></span> argument is mutually exclusive with use of socket activation.</p>
<p>When systemd socket activation is used a number of configuration settings in
<span class="docutils literal">libvirtd.conf</span> are no longer honoured. Instead these settings must be
controlled via the system unit files</p>
<ul class="simple">
<li><p><span class="docutils literal">listen_tcp</span> - TCP socket usage is enabled by starting the
<span class="docutils literal"><span class="pre">libvirtd-tcp.socket</span></span> unit file.</p></li>
<li><p><span class="docutils literal">listen_tls</span> - TLS socket usage is enabled by starting the
<span class="docutils literal"><span class="pre">libvirtd-tls.socket</span></span> unit file.</p></li>
<li><p><span class="docutils literal">tcp_port</span> - Port for the non-TLS TCP socket, controlled via the
<span class="docutils literal">ListenStream</span> parameter in the <span class="docutils literal"><span class="pre">libvirtd-tcp.socket</span></span> unit file.</p></li>
<li><p><span class="docutils literal">tls_port</span> - Port for the TLS TCP socket, controlled via the
<span class="docutils literal">ListenStream</span> parameter in the <span class="docutils literal"><span class="pre">libvirtd-tls.socket</span></span> unit file.</p></li>
<li><p><span class="docutils literal">listen_addr</span> - IP address to listen on, independently controlled via the
<span class="docutils literal">ListenStream</span> parameter in the <span class="docutils literal"><span class="pre">libvirtd-tcp.socket</span></span>  or
<span class="docutils literal"><span class="pre">libvirtd-tls.socket</span></span> unit files.</p></li>
<li><p><span class="docutils literal">unix_sock_group</span> - UNIX socket group owner, controlled via the
<span class="docutils literal">SocketGroup</span> parameter in the <span class="docutils literal">libvirtd.socket</span> and
<span class="docutils literal"><span class="pre">libvirtd-ro.socket</span></span> unit files</p></li>
<li><p><span class="docutils literal">unix_sock_ro_perms</span> - read-only UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">libvirtd-ro.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_rw_perms</span> - read-write UNIX socket permissions, controlled via
the <span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal">libvirtd.socket</span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_admin_perms</span> - admin UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">libvirtd-admin.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_dir</span> - directory in which all UNIX sockets are created
independently controlled via the <span class="docutils literal">ListenStream</span> parameter in any of the
<span class="docutils literal">libvirtd.socket</span>, <span class="docutils literal"><span class="pre">libvirtd-ro.socket</span></span> and <span class="docutils literal"><span class="pre">libvirtd-admin.socket</span></span> unit
files.</p></li>
</ul>
</div>
</div>
<div class="section" id="modular-driver-daemons">
<h1><a class="toc-backref" href="#id7">Modular driver daemons</a><a class="headerlink" href="#modular-driver-daemons" title="Link to this headline">¶</a></h1>
<p>The modular daemons are named after the driver which they are running, with
the pattern <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span> and will become the default in future libvirt.
They are configured via the files <span class="docutils literal"><span class="pre">/etc/libvirt/virt${DRIVER}d.conf</span></span></p>
<p>The following modular daemons currently exist for hypervisor drivers</p>
<ul class="simple">
<li><p><span class="docutils literal">virtqemud</span> - the QEMU management daemon, for running virtual machines
on UNIX platforms, optionally with KVM acceleration, in either system or
session mode</p></li>
<li><p><span class="docutils literal">virtxend</span> - the Xen management daemon, for running virtual machines
on the Xen hypervisor, in system mode only</p></li>
<li><p><span class="docutils literal">virtlxcd</span> - the Linux Container management daemon, for running LXC guests
in system mode only</p></li>
<li><p><span class="docutils literal">virtbhyved</span> - the BHyve management daemon, for running virtual machines
on FreeBSD with the BHyve hypervisor, in system mode.</p></li>
<li><p><span class="docutils literal">virtvboxd</span> - the VirtualBox management daemon, for running virtual machines
on UNIX platforms.</p></li>
</ul>
<p>The additional modular daemons service secondary drivers</p>
<ul class="simple">
<li><p><span class="docutils literal">virtinterfaced</span> - the host NIC management daemon, in system mode only</p></li>
<li><p><span class="docutils literal">virtnetworkd</span> - the virtual network management daemon, in system mode only</p></li>
<li><p><span class="docutils literal">virtnodedevd</span> - the host physical device management daemon, in system mode
only</p></li>
<li><p><span class="docutils literal">virtnwfilterd</span> - the host firewall management daemon, in system mode only</p></li>
<li><p><span class="docutils literal">virtsecretd</span> - the host secret management daemon, in system or session mode</p></li>
<li><p><span class="docutils literal">virtstoraged</span> - the host storage management daemon, in system or session
mode</p></li>
</ul>
<div class="section" id="modular-sockets">
<h2><a class="toc-backref" href="#id8">Modular Sockets</a><a class="headerlink" href="#modular-sockets" title="Link to this headline">¶</a></h2>
<p>When running in system mode, <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span> exposes three UNIX domain
sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virt${DRIVER}d-sock</span></span> - the primary socket for accessing
libvirt APIs, with full read-write privileges. For many of the daemons, a
connection to this socket gives the client privileges that are equivalent to
having a root shell. This is the socket that most management applications
connect to by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virt${DRIVER}d-sock-ro</span></span> - the secondary socket for
accessing libvirt APIs, with limited read-only privileges. A connection to
this socket gives the ability to query the existence of objects and monitor
some aspects of their operation. This is the socket that most management
applications connect to when requesting read only mode. Typically this is
what a monitoring app would use.</p></li>
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virt${DRIVER}d-admin-sock</span></span> - the administrative socket for
controlling operation of the daemon itself (as opposed to drivers it is
running). This can be used to dynamically reconfigure some aspects of the
daemon and monitor/control connected clients.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/run</span> instead of <span class="docutils literal">/var/run</span>.</p>
<p>When running in session mode, <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span> exposes two UNIX domain sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/virt${DRIVER}d-sock</span></span> - the primary socket for
accessing libvirt APIs, with full read-write privileges. A connection to this
socket does not alter the privileges that the client already has. This is the
socket that most management applications connect to by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/virt${DRIVER}d-admin-sock</span></span> - the administrative
socket for controlling operation of the daemon itself (as opposed to drivers
it is running). This can be used to dynamically reconfigure some aspects of
the daemon and monitor/control connected clients.</p></li>
</ul>
<p>Notice that the session mode does not have a separate read-only socket. Since
the clients must be running as the same user as the daemon itself, there is
not any security benefit from attempting to enforce a read-only mode.</p>
<p><span class="docutils literal">$XDG_RUNTIME_DIR</span> commonly points to a per-user private location on tmpfs,
such as <span class="docutils literal"><span class="pre">/run/user/$UID</span></span>.</p>
</div>
<div class="section" id="modular-systemd-integration">
<h2><a class="toc-backref" href="#id9">Modular Systemd Integration</a><a class="headerlink" href="#modular-systemd-integration" title="Link to this headline">¶</a></h2>
<p>When the <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span> daemon is managed by <span class="docutils literal">systemd</span> a number of
desirable features are available, most notably socket activation.</p>
<p>Libvirt ships a number of unit files for controlling <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span>:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">virt${DRIVER}d.service</span></span> - the main unit file for launching the
<span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span> daemon in system mode. The command line arguments passed
can be configured by editing <span class="docutils literal"><span class="pre">/etc/sysconfig/virt${DRIVER}d</span></span>. This is
typically only needed to control the use of the auto shutdown timeout value.
It is recommended that this service unit be configured to start on boot.
This is because various libvirt drivers support autostart of their objects.
If it is known that autostart is not required, this unit can be left to start
on demand.</p></li>
<li><p><span class="docutils literal"><span class="pre">virt${DRIVER}d.socket</span></span> - the unit file corresponding to the main read-write
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virt${DRIVER}d-sock</span></span>. This socket is
recommended to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virt${DRIVER}d-ro.socket</span></span> - the unit file corresponding to the main
read-only UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virt${DRIVER}d-sock-ro</span></span>. This
socket is recommended to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virt${DRIVER}d-admin.socket</span></span> - the unit file corresponding to the
administrative UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virt${DRIVER}d-admin-sock</span></span>.
This socket is recommended to be started on boot by default.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/etc/default</span> instead of <span class="docutils literal">/etc/sysconfig</span>.</p>
<p>The socket unit files are newly introduced in 5.6.0. On newly installed hosts
the UNIX socket units should be enabled by default. When upgrading an existing
host from a previous version of libvirt, the socket unit files will be masked
if <span class="docutils literal"><span class="pre">virt${DRIVER}d</span></span> is currently configured to use the <span class="docutils literal"><span class="pre">--listen</span></span> argument,
since the <span class="docutils literal"><span class="pre">--listen</span></span> argument is mutually exclusive with use of socket
activation.</p>
<p>When systemd socket activation is used a number of configuration settings in
<span class="docutils literal"><span class="pre">virt${DRIVER}d.conf</span></span> are no longer honoured. Instead these settings must be
controlled via the system unit files:</p>
<ul class="simple">
<li><p><span class="docutils literal">unix_sock_group</span> - UNIX socket group owner, controlled via the
<span class="docutils literal">SocketGroup</span> parameter in the <span class="docutils literal"><span class="pre">virt${DRIVER}d.socket</span></span> and
<span class="docutils literal"><span class="pre">virt${DRIVER}d-ro.socket</span></span> unit files</p></li>
<li><p><span class="docutils literal">unix_sock_ro_perms</span> - read-only UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virt${DRIVER}d-ro.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_rw_perms</span> - read-write UNIX socket permissions, controlled via
the <span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virt${DRIVER}d.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_admin_perms</span> - admin UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virt${DRIVER}d-admin.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_dir</span> - directory in which all UNIX sockets are created
independently controlled via the <span class="docutils literal">ListenStream</span> parameter in any of the
<span class="docutils literal"><span class="pre">virt${DRIVER}d.socket</span></span>, <span class="docutils literal"><span class="pre">virt${DRIVER}d-ro.socket</span></span> and
<span class="docutils literal"><span class="pre">virt${DRIVER}d-admin.socket</span></span> unit files.</p></li>
</ul>
</div>
<div class="section" id="switching-to-modular-daemons">
<h2><a class="toc-backref" href="#id10">Switching to modular daemons</a><a class="headerlink" href="#switching-to-modular-daemons" title="Link to this headline">¶</a></h2>
<p>If a host is currently set to use the monolithic <span class="docutils literal">libvirtd</span> daemon and needs
to be migrated to the modular daemons a number of services need to be
changed. The steps below outline the process on hosts using the systemd init
service.</p>
<p>While it is technically possible to do this while virtual machines are running,
it is recommended that virtual machines be stopped or live migrated to a new
host first.</p>
<ol class="arabic">
<li><p>Stop the current monolithic daemon and its socket units</p>
<pre class="literal-block">$ systemctl stop libvirtd.service
$ systemctl stop libvirtd{,-ro,-admin,-tcp,-tls}.socket</pre>
</li>
<li><p>Disable future start of the monolithic daemon</p>
<pre class="literal-block">$ systemctl disable libvirtd.service
$ systemctl disable libvirtd{,-ro,-admin,-tcp,-tls}.socket</pre>
<p>For stronger protection it is valid to use <span class="docutils literal">mask</span> instead of <span class="docutils literal">disable</span>
too.</p>
</li>
<li><p>Enable the new daemons for the particular virtualizationd driver desired,
and any of the secondary drivers to accompany it. The following example
enables the QEMU driver and all the secondary drivers:</p>
<pre class="literal-block">$ for drv in qemu interface network nodedev nwfilter secret storage
  do
    systemctl unmask virt${drv}d.service
    systemctl unmask virt${drv}d{,-ro,-admin}.socket
    systemctl enable virt${drv}d.service
    systemctl enable virt${drv}d{,-ro,-admin}.socket
  done</pre>
</li>
<li><p>Start the sockets for the same set of daemons. There is no need to start the
services as they will get started when the first socket connection is
established</p>
<pre class="literal-block">$ for drv in qemu network nodedev nwfilter secret storage
  do
    systemctl start virt${drv}d{,-ro,-admin}.socket
  done</pre>
</li>
<li><p>If connections from remote hosts need to be supported the proxy daemon
must be enabled and started</p>
<pre class="literal-block">$ systemctl unmask virtproxyd.service
$ systemctl unmask virtproxyd{,-ro,-admin}.socket
$ systemctl enable virtproxyd.service
$ systemctl enable virtproxyd{,-ro,-admin}.socket
$ systemctl start virtproxyd{,-ro,-admin}.socket</pre>
<p>The UNIX sockets allow for remote access using SSH tunneling. If <span class="docutils literal">libvirtd</span>
had TCP or TLS sockets configured, those should be started too</p>
<pre class="literal-block">$ systemctl unmask virtproxyd-tls.socket
$ systemctl enable virtproxyd-tls.socket
$ systemctl start virtproxyd-tls.socket</pre>
</li>
</ol>
</div>
</div>
<div class="section" id="checking-whether-modular-monolithic-mode-is-in-use">
<h1><a class="toc-backref" href="#id11">Checking whether modular/monolithic mode is in use</a><a class="headerlink" href="#checking-whether-modular-monolithic-mode-is-in-use" title="Link to this headline">¶</a></h1>
<p>New distributions are likely to use the modular mode although the upgrade
process preserves whichever mode was in use before the upgrade.</p>
<p>To determine whether modular or monolithic mode is in use on a host running
<span class="docutils literal">systemd</span> as the init system you can take the following steps:</p>
<ol class="arabic">
<li><p>Check whether the modular daemon infrastructure is in use</p>
<p>First check whether the modular daemon you are interested (see
<a class="reference internal" href="#modular-driver-daemons">Modular driver daemons</a> for a summary of which daemons are provided by
libvirt) in is running:</p>
<ol class="arabic simple">
<li><p>Check <span class="docutils literal">.socket</span> for socket activated services</p></li>
</ol>
<blockquote>
<pre class="literal-block"># systemctl is-active virtqemud.socket
active</pre>
</blockquote>
<ol class="arabic simple">
<li><p>Check <span class="docutils literal">.service</span> for always-running daemons</p></li>
</ol>
<blockquote>
<pre class="literal-block"># systemctl is-active virtqemud.service
active</pre>
</blockquote>
<p>If either of the above is <span class="docutils literal">active</span> your system is using the modular daemons.</p>
</li>
<li><p>Check whether the monolithic daemon is in use</p>
<ol class="arabic simple">
<li><p>Check <span class="docutils literal">libvirtd.socket</span></p></li>
</ol>
<blockquote>
<pre class="literal-block"># systemctl is-active libvirtd.socket
active</pre>
</blockquote>
<ol class="arabic simple">
<li><p>Check <span class="docutils literal">libvirtd.service</span> for always-running daemon</p></li>
</ol>
<blockquote>
<pre class="literal-block"># systemctl is-active libvirtd.service
active</pre>
</blockquote>
<p>If either of the above is <span class="docutils literal">active</span> your system is using the monolithic
daemon.</p>
</li>
<li><p>To determine which of the above will be in use on the next boot of the system,
substitute <span class="docutils literal"><span class="pre">is-enabled</span></span> for <span class="docutils literal"><span class="pre">is-active</span></span> in the above examples.</p></li>
</ol>
</div>
<div class="section" id="proxy-daemon">
<h1><a class="toc-backref" href="#id12">Proxy daemon</a><a class="headerlink" href="#proxy-daemon" title="Link to this headline">¶</a></h1>
<div class="section" id="proxy-sockets">
<h2><a class="toc-backref" href="#id13">Proxy sockets</a><a class="headerlink" href="#proxy-sockets" title="Link to this headline">¶</a></h2>
<p>When running in system mode, <span class="docutils literal">virtproxyd</span> exposes three UNIX domain sockets,
and optionally, one or two TCP sockets. These sockets are identical to those
provided by the traditional <span class="docutils literal">libvirtd</span> so refer to earlier documentation in
this page.</p>
<p>When running in session mode, <span class="docutils literal">virtproxyd</span> exposes two UNIX domain sockets,
which are again identical to those provided by <span class="docutils literal">libvirtd</span>.</p>
</div>
<div class="section" id="proxy-systemd-integration">
<h2><a class="toc-backref" href="#id14">Proxy Systemd Integration</a><a class="headerlink" href="#proxy-systemd-integration" title="Link to this headline">¶</a></h2>
<p>When the <span class="docutils literal">virtproxyd</span> daemon is managed by <span class="docutils literal">systemd</span> a number of desirable
features are available, most notably socket activation.</p>
<p>Libvirt ships a number of unit files for controlling <span class="docutils literal">virtproxyd</span>:</p>
<ul class="simple">
<li><p><span class="docutils literal">virtproxyd.service</span> - the main unit file for launching the <span class="docutils literal">virtproxyd</span>
daemon in system mode. The command line arguments passed can be configured by
editing <span class="docutils literal">/etc/sysconfig/virtproxyd</span>. This is typically only needed to
control the use of the auto shutdown timeout value.</p></li>
<li><p><span class="docutils literal">virtproxyd.socket</span> - the unit file corresponding to the main read-write
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-sock</span></span>. This socket is recommended to
be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virtproxyd-ro.socket</span></span> - the unit file corresponding to the main read-only
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-sock-ro</span></span>. This socket is recommended
to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virtproxyd-admin.socket</span></span> - the unit file corresponding to the
administrative UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/libvirt-admin-sock</span></span>. This
socket is recommended to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virtproxyd-tcp.socket</span></span> - the unit file corresponding to the TCP 16509 port
for non-TLS remote access. This socket should not be configured to start on
boot until the administrator has configured a suitable authentication
mechanism.</p></li>
<li><p><span class="docutils literal"><span class="pre">virtproxyd-tls.socket</span></span> - the unit file corresponding to the TCP 16509 port
for TLS remote access. This socket should not be configured to start on boot
until the administrator has deployed x509 certificates and optionally
configured a suitable authentication mechanism.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/etc/default</span> instead of <span class="docutils literal">/etc/sysconfig</span>.</p>
<p>The socket unit files are newly introduced in 5.6.0. On newly installed hosts
the UNIX socket units should be enabled by default. When upgrading an existing
host from a previous version of libvirt, the socket unit files will be masked
if <span class="docutils literal">virtproxyd</span> is currently configured to use the <span class="docutils literal"><span class="pre">--listen</span></span> argument, since
the <span class="docutils literal"><span class="pre">--listen</span></span> argument is mutually exclusive with use of socket activation.</p>
<p>When systemd socket activation is used a number of configuration settings in
<span class="docutils literal">virtproxyd.conf</span> are no longer honoured. Instead these settings must be
controlled via the system unit files. Refer to the earlier documentation on
the <span class="docutils literal">libvirtd</span> service socket configuration for further information.</p>
</div>
</div>
<div class="section" id="logging-daemon">
<h1><a class="toc-backref" href="#id15">Logging daemon</a><a class="headerlink" href="#logging-daemon" title="Link to this headline">¶</a></h1>
<p>The <span class="docutils literal">virtlogd</span> daemon provides a service for managing log files associated
with QEMU virtual machines. The QEMU process is given one or more pipes, the
other end of which are owned by the <span class="docutils literal">virtlogd</span> daemon. It will then write
data on those pipes to log files, while enforcing a maximum file size and
performing log rollover at the size limit.</p>
<p>Since the daemon holds open anonymous pipe file descriptors, it must never be
stopped while any QEMU virtual machines are running. To enable software updates
to be applied, the daemon is capable of re-executing itself while keeping all
file descriptors open. This can be triggered by sending the daemon <span class="docutils literal">SIGUSR1</span></p>
<div class="section" id="logging-sockets">
<h2><a class="toc-backref" href="#id16">Logging Sockets</a><a class="headerlink" href="#logging-sockets" title="Link to this headline">¶</a></h2>
<p>When running in system mode, <span class="docutils literal">virtlogd</span> exposes two UNIX domain sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virtlogd-sock</span></span> - the primary socket for accessing
libvirt APIs, with full read-write privileges. Access to the socket is
restricted to the root user.</p></li>
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virtlogd-admin-sock</span></span> - the administrative socket for
controlling operation of the daemon itself (as opposed to drivers it is
running). This can be used to dynamically reconfigure some aspects of the
daemon and monitor/control connected clients.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/run</span> instead of <span class="docutils literal">/var/run</span>.</p>
<p>When running in session mode, <span class="docutils literal">virtlogd</span> exposes two UNIX domain sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/virtlogd-sock</span></span> - the primary socket for
accessing libvirt APIs, with full read-write privileges. Access to the
socket is restricted to the unprivileged user running the daemon.</p></li>
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/virtlogd-admin-sock</span></span> - the administrative
socket for controlling operation of the daemon itself (as opposed to drivers
it is running). This can be used to dynamically reconfigure some aspects of
the daemon and monitor/control connected clients.</p></li>
</ul>
<p><span class="docutils literal">$XDG_RUNTIME_DIR</span> commonly points to a per-user private location on tmpfs,
such as <span class="docutils literal"><span class="pre">/run/user/$UID</span></span>.</p>
</div>
<div class="section" id="logging-systemd-integration">
<h2><a class="toc-backref" href="#id17">Logging Systemd Integration</a><a class="headerlink" href="#logging-systemd-integration" title="Link to this headline">¶</a></h2>
<p>When the <span class="docutils literal">virtlogd</span> daemon is managed by <span class="docutils literal">systemd</span> a number of desirable
features are available, most notably socket activation.</p>
<p>Libvirt ships a number of unit files for controlling <span class="docutils literal">virtlogd</span>:</p>
<ul class="simple">
<li><p><span class="docutils literal">virtlogd.service</span> - the main unit file for launching the
<span class="docutils literal">virtlogd</span> daemon in system mode. The command line arguments passed
can be configured by editing <span class="docutils literal">/etc/sysconfig/virtlogd</span>. This is
typically only needed to control the use of the auto shutdown timeout value.</p></li>
<li><p><span class="docutils literal">virtlogd.socket</span> - the unit file corresponding to the main read-write
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virtlogd-sock</span></span>. This socket is recommended
to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virtlogd-admin.socket</span></span> - the unit file corresponding to the administrative
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virtlogd-admin-sock</span></span>. This socket is
recommended to be started on boot by default.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/etc/default</span> instead of <span class="docutils literal">/etc/sysconfig</span>.</p>
<p>When systemd socket activation is used a number of configuration settings in
<span class="docutils literal">virtlogd.conf</span> are no longer honoured. Instead these settings must be
controlled via the system unit files:</p>
<ul class="simple">
<li><p><span class="docutils literal">unix_sock_group</span> - UNIX socket group owner, controlled via the
<span class="docutils literal">SocketGroup</span> parameter in the <span class="docutils literal">virtlogd.socket</span> and
<span class="docutils literal"><span class="pre">virtlogd-ro.socket</span></span> unit files</p></li>
<li><p><span class="docutils literal">unix_sock_ro_perms</span> - read-only UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virtlogd-ro.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_rw_perms</span> - read-write UNIX socket permissions, controlled via
the <span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal">virtlogd.socket</span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_admin_perms</span> - admin UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virtlogd-admin.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_dir</span> - directory in which all UNIX sockets are created
independently controlled via the <span class="docutils literal">ListenStream</span> parameter in any of the
<span class="docutils literal">virtlogd.socket</span> and <span class="docutils literal"><span class="pre">virtlogd-admin.socket</span></span> unit files.</p></li>
</ul>
</div>
</div>
<div class="section" id="locking-daemon">
<h1><a class="toc-backref" href="#id18">Locking daemon</a><a class="headerlink" href="#locking-daemon" title="Link to this headline">¶</a></h1>
<p>The <span class="docutils literal">virtlockd</span> daemon provides a service for holding locks against file
images and devices serving as backing storage for virtual disks. The locks
will be held for as long as there is a QEMU process running with the disk
open.</p>
<p>To ensure continuity of locking, the daemon holds open anonymous file
descriptors, it must never be stopped while any QEMU virtual machines are
running. To enable software updates to be applied, the daemon is capable of
re-executing itself while keeping all file descriptors open. This can be
triggered by sending the daemon <span class="docutils literal">SIGUSR1</span></p>
<div class="section" id="locking-sockets">
<h2><a class="toc-backref" href="#id19">Locking Sockets</a><a class="headerlink" href="#locking-sockets" title="Link to this headline">¶</a></h2>
<p>When running in system mode, <span class="docutils literal">virtlockd</span> exposes two UNIX domain sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virtlockd-sock</span></span> - the primary socket for accessing
libvirt APIs, with full read-write privileges. Access to the socket is
restricted to the root user.</p></li>
<li><p><span class="docutils literal"><span class="pre">/var/run/libvirt/virtlockd-admin-sock</span></span> - the administrative socket for
controlling operation of the daemon itself (as opposed to drivers it is
running). This can be used to dynamically reconfigure some aspects of the
daemon and monitor/control connected clients.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/run</span> instead of <span class="docutils literal">/var/run</span>.</p>
<p>When running in session mode, <span class="docutils literal">virtlockd</span> exposes two UNIX domain sockets:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/virtlockd-sock</span></span> - the primary socket for
accessing libvirt APIs, with full read-write privileges. Access to the
socket is restricted to the unprivileged user running the daemon.</p></li>
<li><p><span class="docutils literal"><span class="pre">$XDG_RUNTIME_DIR/libvirt/virtlockd-admin-sock</span></span> - the administrative
socket for controlling operation of the daemon itself (as opposed to drivers
it is running). This can be used to dynamically reconfigure some aspects of
the daemon and monitor/control connected clients.</p></li>
</ul>
<p><span class="docutils literal">$XDG_RUNTIME_DIR</span> commonly points to a per-user private location on tmpfs,
such as <span class="docutils literal"><span class="pre">/run/user/$UID</span></span>.</p>
</div>
<div class="section" id="locking-systemd-integration">
<h2><a class="toc-backref" href="#id20">Locking Systemd Integration</a><a class="headerlink" href="#locking-systemd-integration" title="Link to this headline">¶</a></h2>
<p>When the <span class="docutils literal">virtlockd</span> daemon is managed by <span class="docutils literal">systemd</span> a number of desirable
features are available, most notably socket activation.</p>
<p>Libvirt ships a number of unit files for controlling <span class="docutils literal">virtlockd</span>:</p>
<ul class="simple">
<li><p><span class="docutils literal">virtlockd.service</span> - the main unit file for launching the
<span class="docutils literal">virtlockd</span> daemon in system mode. The command line arguments passed
can be configured by editing <span class="docutils literal">/etc/sysconfig/virtlockd</span>. This is
typically only needed to control the use of the auto shutdown timeout value.</p></li>
<li><p><span class="docutils literal">virtlockd.socket</span> - the unit file corresponding to the main read-write
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virtlockd-sock</span></span>. This socket is recommended
to be started on boot by default.</p></li>
<li><p><span class="docutils literal"><span class="pre">virtlockd-admin.socket</span></span> - the unit file corresponding to the administrative
UNIX socket <span class="docutils literal"><span class="pre">/var/run/libvirt/virtlockd-admin-sock</span></span>. This socket is
recommended to be started on boot by default.</p></li>
</ul>
<p>NB, some distros will use <span class="docutils literal">/etc/default</span> instead of <span class="docutils literal">/etc/sysconfig</span>.</p>
<p>When systemd socket activation is used a number of configuration settings in
<span class="docutils literal">virtlockd.conf</span> are no longer honoured. Instead these settings must be
controlled via the system unit files:</p>
<ul class="simple">
<li><p><span class="docutils literal">unix_sock_group</span> - UNIX socket group owner, controlled via the
<span class="docutils literal">SocketGroup</span> parameter in the <span class="docutils literal">virtlockd.socket</span> and
<span class="docutils literal"><span class="pre">virtlockd-ro.socket</span></span> unit files</p></li>
<li><p><span class="docutils literal">unix_sock_ro_perms</span> - read-only UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virtlockd-ro.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_rw_perms</span> - read-write UNIX socket permissions, controlled via
the <span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal">virtlockd.socket</span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_admin_perms</span> - admin UNIX socket permissions, controlled via the
<span class="docutils literal">SocketMode</span> parameter in the <span class="docutils literal"><span class="pre">virtlockd-admin.socket</span></span> unit file</p></li>
<li><p><span class="docutils literal">unix_sock_dir</span> - directory in which all UNIX sockets are created
independently controlled via the <span class="docutils literal">ListenStream</span> parameter in any of the
<span class="docutils literal">virtlockd.socket</span> and <span class="docutils literal"><span class="pre">virtlockd-admin.socket</span></span> unit files.</p></li>
</ul>
</div>
</div>
<div class="section" id="changing-command-line-options-for-daemons">
<h1><a class="toc-backref" href="#id21">Changing command line options for daemons</a><a class="headerlink" href="#changing-command-line-options-for-daemons" title="Link to this headline">¶</a></h1>
<p>Two ways exist to override the defaults in the provided service files:
either a systemd "drop-in" configuration file, or a <span class="docutils literal"><span class="pre">/etc/sysconfig/$daemon</span></span>
file must be created.  For example, to change the command line option
for a debug session of <span class="docutils literal">libvirtd</span>, create a file
<span class="docutils literal">/etc/systemd/system/libvirtd.service.d/debug.conf</span> with the following content:</p>
<blockquote>
<pre class="literal-block">[Unit]
Description=Virtualization daemon, with override from debug.conf

[Service]
Environment=G_DEBUG=fatal-warnings
Environment=LIBVIRTD_ARGS="--listen --verbose"</pre>
</blockquote>
<p>After changes to systemd "drop-in" configuration files it is required to run
<span class="docutils literal">systemctl <span class="pre">daemon-reload</span></span>.</p>
</div>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="downloads.html">Download</a>
          </li>
          <li>
            <a href="contribute.html">Contribute</a>
          </li>
          <li>
            <a href="docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/daemons.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
