<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/formatcaps.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: Driver capabilities XML format</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="driver-capabilities-xml-format">
<h1>Driver capabilities XML format</h1>

<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#element-and-attribute-overview" id="id1">Element and attribute overview</a></p>
<ul>
<li><p><a class="reference internal" href="#host-capabilities" id="id2">Host capabilities</a></p></li>
<li><p><a class="reference internal" href="#guest-capabilities" id="id3">Guest capabilities</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id4">Examples</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="element-and-attribute-overview">
<h1><a class="toc-backref" href="#id1">Element and attribute overview</a><a class="headerlink" href="#element-and-attribute-overview" title="Link to this headline">¶</a></h1>
<p>As new virtualization engine support gets added to libvirt, and to handle cases
like QEMU supporting a variety of emulations, a query interface has been added
in 0.2.1 allowing to list the set of supported virtualization capabilities on
the host:</p>
<pre class="literal-block">char * virConnectGetCapabilities (virConnectPtr conn);</pre>
<p>The value returned is an XML document listing the virtualization capabilities of
the host and virtualization engine to which <span class="docutils literal">`conn</span> is connected. One can test
it using <span class="docutils literal">virsh</span> command line tool command '<span class="docutils literal">capabilities</span>', it dumps the
XML associated to the current connection.</p>
<p>As can be seen in the <a class="reference internal" href="#examples">Examples</a>, the capabilities XML
consists of the <span class="docutils literal">capabilities</span> element which have exactly one <span class="docutils literal">host</span> child
element to report information on host capabilities, and zero or more <span class="docutils literal">guest</span>
element to express the set of architectures the host can run at the moment.</p>
<div class="section" id="host-capabilities">
<h2><a class="toc-backref" href="#id2">Host capabilities</a><a class="headerlink" href="#host-capabilities" title="Link to this headline">¶</a></h2>
<p>The <span class="docutils literal">&lt;host/&gt;</span> element consists of the following child elements:</p>
<dl class="simple">
<dt><span class="docutils literal">uuid</span></dt>
<dd><p>The host UUID.</p>
</dd>
<dt><span class="docutils literal">cpu</span></dt>
<dd><p>The host CPU architecture and features.</p>
</dd>
<dt><span class="docutils literal">power_management</span></dt>
<dd><p>whether host is capable of memory suspend, disk hibernation, or hybrid
suspend.</p>
</dd>
<dt><span class="docutils literal">migration_features</span></dt>
<dd><p>This element exposes information on the hypervisor's migration capabilities,
like live migration, supported URI transports, and so on.</p>
</dd>
<dt><span class="docutils literal">topology</span></dt>
<dd><p>This element embodies the host internal topology. Management applications may
want to learn this information when orchestrating new guests - e.g. due to
reduce inter-NUMA node transfers. Note that the <span class="docutils literal">sockets</span> value reported
here is per-NUMA-node; this is in contrast to the value given in domain
definitions, which is interpreted as a total number of sockets for the
domain.</p>
</dd>
<dt><span class="docutils literal">secmodel</span></dt>
<dd><p>To find out default security labels for different security models you need to
parse this element. In contrast with the former elements, this is repeated
for each security model the libvirt daemon currently supports.</p>
</dd>
</dl>
</div>
<div class="section" id="guest-capabilities">
<h2><a class="toc-backref" href="#id3">Guest capabilities</a><a class="headerlink" href="#guest-capabilities" title="Link to this headline">¶</a></h2>
<p>While the previous section (<a class="reference internal" href="#host-capabilities">Host capabilities</a>) aims at host capabilities,
this one focuses on capabilities available to a guest using a given hypervisor.
The <span class="docutils literal">&lt;guest/&gt;</span> element will typically wrap up the following elements:</p>
<dl>
<dt><span class="docutils literal">os_type</span></dt>
<dd><p>This expresses what kind of operating system the hypervisor is able to run.
Possible values are:</p>
<dl class="simple">
<dt><span class="docutils literal">xen</span></dt>
<dd><p>for XEN PV</p>
</dd>
<dt><span class="docutils literal">linux</span></dt>
<dd><p>legacy alias for <span class="docutils literal">xen</span></p>
</dd>
<dt><span class="docutils literal">xenpvh</span></dt>
<dd><p>for XEN PVH</p>
</dd>
<dt><span class="docutils literal">hvm</span></dt>
<dd><p>Unmodified operating system</p>
</dd>
<dt><span class="docutils literal">exe</span></dt>
<dd><p>Container based virtualization</p>
</dd>
</dl>
</dd>
<dt><span class="docutils literal">arch</span></dt>
<dd><p>This element brings some information on supported guest architecture.
Possible subelements are:</p>
<dl class="simple">
<dt><span class="docutils literal">wordsize</span></dt>
<dd><p>Size of CPU word in bits, for example 64.</p>
</dd>
<dt><span class="docutils literal">emulator</span></dt>
<dd><p>Emulator (device model) path, for use in
<a class="reference external" href="formatdomain.html#devices">emulator</a> element of domain XML.</p>
</dd>
<dt><span class="docutils literal">loader</span></dt>
<dd><p>Loader path, for use in <a class="reference external" href="formatdomain.html#bios-bootloader">loader</a>
element of domain XML.</p>
</dd>
<dt><span class="docutils literal">machine</span></dt>
<dd><p>Machine type, for use in
<a class="reference external" href="formatdomain.html#operating-system-booting">machine</a> attribute of
os/type element in domain XML. For example Xen supports <span class="docutils literal">xenfv</span> for HVM,
<span class="docutils literal">xenpv</span> for PV, or <span class="docutils literal">xenpvh</span> for PVH.</p>
</dd>
<dt><span class="docutils literal">domain</span></dt>
<dd><p>The <span class="docutils literal">type</span> attribute of this element specifies the type of hypervisor
required to run the domain. Use in
<a class="reference external" href="formatdomain.html#element-and-attribute-overview">type</a> attribute of
the domain root element.</p>
</dd>
</dl>
</dd>
<dt><span class="docutils literal">features</span></dt>
<dd><p>This optional element encases possible features that can be used with a guest
of described type. Possible subelements are:</p>
<dl class="simple">
<dt><span class="docutils literal">pae</span></dt>
<dd><p>If present, 32-bit guests can use PAE address space extensions,
<span class="since">since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">nonpae</span></dt>
<dd><p>If present, 32-bit guests can be run without requiring PAE, <span class="since">since
0.4.1</span></p>
</dd>
<dt><span class="docutils literal">ia64_be</span></dt>
<dd><p>If present, IA64 guests can be run in big-endian mode, <span class="since">since
0.4.1</span></p>
</dd>
<dt><span class="docutils literal">acpi</span></dt>
<dd><p>If this element is present, the <span class="docutils literal">default</span> attribute describes whether
the hypervisor exposes ACPI to the guest by default, and the <span class="docutils literal">toggle</span>
attribute describes whether the user can override this default.
<span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">apic</span></dt>
<dd><p>If this element is present, the <span class="docutils literal">default</span> attribute describes whether
the hypervisor exposes APIC to the guest by default, and the <span class="docutils literal">toggle</span>
attribute describes whether the user can override this default.
<span class="since">Since 0.4.1</span></p>
</dd>
<dt><span class="docutils literal">cpuselection</span></dt>
<dd><p>If this element is present, the hypervisor supports the <span class="docutils literal">&lt;cpu&gt;</span> element
within a domain definition for fine-grained control over the CPU presented
to the guest. <span class="since">Since 0.7.5</span></p>
</dd>
<dt><span class="docutils literal">deviceboot</span></dt>
<dd><p>If this element is present, the <span class="docutils literal">&lt;boot <span class="pre">order='...'/&gt;</span></span> element can be
used inside devices, rather than the older boot specification by category.
<span class="since">Since 0.8.8</span></p>
</dd>
<dt><span class="docutils literal">disksnapshot</span></dt>
<dd><p>If this element is present, the <span class="docutils literal">default</span> attribute describes whether
external disk snapshots are supported. If absent, external snapshots may
still be supported, but it requires attempting the API and checking for an
error to find out for sure. <span class="since">Since 1.2.3</span></p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples</a><a class="headerlink" href="#examples" title="Link to this headline">¶</a></h2>
<p>For example, in the case of a 64-bit machine with hardware virtualization
capabilities enabled in the chip and BIOS you will see:</p>
<pre class="literal-block">&lt;capabilities&gt;
  &lt;host&gt;
    &lt;cpu&gt;
      &lt;arch&gt;x86_64&lt;/arch&gt;
      &lt;features&gt;
        &lt;vmx/&gt;
      &lt;/features&gt;
      &lt;model&gt;core2duo&lt;/model&gt;
      &lt;vendor&gt;Intel&lt;/vendor&gt;
      &lt;topology sockets="1" dies="1" cores="2" threads="1"/&gt;
      &lt;feature name="lahf_lm"/&gt;
      &lt;feature name='xtpr'/&gt;
      ...
    &lt;/cpu&gt;
    &lt;power_management&gt;
      &lt;suspend_mem/&gt;
      &lt;suspend_disk/&gt;
      &lt;suspend_hybrid/&gt;
    &lt;/power_management&gt;
  &lt;/host&gt;

  &lt;!-- xen-3.0-x86_64 --&gt;
  &lt;guest&gt;
    &lt;os_type&gt;xen&lt;/os_type&gt;
    &lt;arch name="x86_64"&gt;
      &lt;wordsize&gt;64&lt;/wordsize&gt;
      &lt;domain type="xen"&gt;&lt;/domain&gt;
      &lt;emulator&gt;/usr/lib64/xen/bin/qemu-dm&lt;/emulator&gt;
    &lt;/arch&gt;
    &lt;features&gt;
    &lt;/features&gt;
  &lt;/guest&gt;

  &lt;!-- hvm-3.0-x86_32 --&gt;
  &lt;guest&gt;
    &lt;os_type&gt;hvm&lt;/os_type&gt;
    &lt;arch name="i686"&gt;
      &lt;wordsize&gt;32&lt;/wordsize&gt;
      &lt;domain type="xen"&gt;&lt;/domain&gt;
      &lt;emulator&gt;/usr/lib/xen/bin/qemu-dm&lt;/emulator&gt;
      &lt;machine&gt;pc&lt;/machine&gt;
      &lt;machine&gt;isapc&lt;/machine&gt;
      &lt;loader&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;
    &lt;/arch&gt;
    &lt;features&gt;
      &lt;cpuselection/&gt;
      &lt;deviceboot/&gt;
    &lt;/features&gt;
  &lt;/guest&gt;

  ...
&lt;/capabilities&gt;</pre>
</div>
</div>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="downloads.html">Download</a>
          </li>
          <li>
            <a href="contribute.html">Contribute</a>
          </li>
          <li>
            <a href="docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/formatcaps.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
