<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
        This file is autogenerated from docs/python.rst
        Do not edit this file. Changes will be lost.
      -->
  <!--
        This page was generated at Wed Apr 19 07:14:27 2023 UTC.
      -->
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
    <link rel="manifest" href="/manifest.json"/>
    <meta name="theme-color" content="#ffffff"/>
    <title>libvirt: Python API bindings</title>
    <meta name="description" content="libvirt, virtualization, virtualization API"/>
    <script type="text/javascript" src="js/main.js">
      <!--// forces non-empty element-->
    </script>
  </head>
  <body onload="pageload()">
    <div id="body">
      <div class="document" id="python-api-bindings">
<h1>Python API bindings</h1>

<p>The Python binding should be complete and are mostly automatically generated
from the formal description of the API in xml. The bindings are articulated
around 2 classes <span class="docutils literal">virConnect</span> and virDomain mapping to the C types. Functions
in the C API taking either type as argument then becomes methods for the
classes, their name is just stripped from the virConnect or virDomain(Get)
prefix and the first letter gets converted to lower case, for example the C
functions:</p>
<p><span class="docutils literal">int virConnectNumOfDomains (virConnectPtr conn);</span></p>
<p><span class="docutils literal">int virDomainSetMaxMemory (virDomainPtr domain, unsigned long memory);</span></p>
<p>become</p>
<p><span class="docutils literal"><span class="pre">virConnect::numOfDomains(self)</span></span></p>
<p><span class="docutils literal"><span class="pre">virDomain::setMaxMemory(self,</span> memory)</span></p>
<p>This process is fully automated, you can get a summary of the conversion in the
file libvirtclass.txt present in the python dir or in the docs.There is a couple
of function who don't map directly to their C counterparts due to specificities
in their argument conversions:</p>
<ul class="simple">
<li><p><span class="docutils literal">virConnectListDomains</span> is replaced by <span class="docutils literal"><span class="pre">virDomain::listDomainsID(self)</span></span>
which returns a list of the integer ID for the currently running domains</p></li>
<li><p><span class="docutils literal">virDomainGetInfo</span> is replaced by <span class="docutils literal"><span class="pre">virDomain::info()</span></span> which returns a
list of</p>
<ol class="arabic simple">
<li><p>state: one of the state values (virDomainState)</p></li>
<li><p>maxMemory: the maximum memory used by the domain</p></li>
<li><p>memory: the current amount of memory used by the domain</p></li>
<li><p>nbVirtCPU: the number of virtual CPU</p></li>
<li><p>cpuTime: the time used by the domain in nanoseconds</p></li>
</ol>
</li>
</ul>
<p>So let's look at a simple example:</p>
<pre class="literal-block">import libvirt
import sys

try:
    conn = libvirt.openReadOnly(None)
except libvirt.libvirtError:
    print('Failed to open connection to the hypervisor')
    sys.exit(1)

try:
    dom0 = conn.lookupByName("Domain-0")
except libvirt.libvirtError:
    print('Failed to find the main domain')
    sys.exit(1)

print("Domain 0: id %d running %s" % (dom0.ID(), dom0.OSType()))
print(dom0.info())</pre>
<p>There is not much to comment about it, it really is a straight mapping from the
C API, the only points to notice are:</p>
<ul class="simple">
<li><p>the import of the module called <span class="docutils literal">libvirt</span></p></li>
<li><p>getting a connection to the hypervisor, in that case using the openReadOnly
function allows the code to execute as a normal user.</p></li>
<li><p>getting an object representing the Domain 0 using lookupByName</p></li>
<li><p>if the domain is not found a libvirtError exception will be raised</p></li>
<li><p>extracting and printing some information about the domain using various
methods associated to the virDomain class.</p></li>
</ul>
</div>
    </div>
    <div id="nav">
      <div id="home">
        <a href="index.html">Home</a>
      </div>
      <div id="jumplinks">
        <ul>
          <li>
            <a href="downloads.html">Download</a>
          </li>
          <li>
            <a href="contribute.html">Contribute</a>
          </li>
          <li>
            <a href="docs.html">Docs</a>
          </li>
        </ul>
      </div>
      <div id="search">
        <form id="simplesearch" action="https://www.google.com/search" enctype="application/x-www-form-urlencoded" method="get">
          <div>
            <input id="searchsite" name="sitesearch" type="hidden" value="libvirt.org"/>
            <input id="searchq" name="q" type="text" size="12" value=""/>
            <input name="submit" type="submit" value="Go"/>
          </div>
        </form>
        <div id="advancedsearch">
          <span>
            <input type="radio" name="what" id="whatwebsite" checked="checked" value="website"/>
            <label for="whatwebsite">Website</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatwiki" value="wiki"/>
            <label for="whatwiki">Wiki</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatdevs" value="devs"/>
            <label for="whatdevs">Developers list</label>
          </span>
          <span>
            <input type="radio" name="what" id="whatusers" value="users"/>
            <label for="whatusers">Users list</label>
          </span>
        </div>
      </div>
    </div>
    <div id="footer">
      <div id="contact">
        <h3>Contact</h3>
        <ul>
          <li>
            <a href="contact.html#mailing-lists">email</a>
          </li>
          <li>
            <a href="contact.html#irc">irc</a>
          </li>
        </ul>
      </div>
      <div id="community">
        <h3>Community</h3>
        <ul>
          <li>
            <a href="https://twitter.com/hashtag/libvirt">twitter</a>
          </li>
          <li>
            <a href="https://stackoverflow.com/questions/tagged/libvirt">stackoverflow</a>
          </li>
          <li>
            <a href="https://serverfault.com/questions/tagged/libvirt">serverfault</a>
          </li>
        </ul>
      </div>
      <div id="contribute">
        <h3>Contribute</h3>
        <ul>
          <li>
            <a href="https://gitlab.com/libvirt/libvirt/-/blob/master/docs/python.rst">edit this page</a>
          </li>
        </ul>
      </div>
      <div id="conduct">
            Participants in the libvirt project agree to abide by <a href="governance.html#code-of-conduct">the project code of conduct</a></div>
      <br class="clear"/>
    </div>
  </body>
</html>
